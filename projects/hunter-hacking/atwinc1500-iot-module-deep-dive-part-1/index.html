<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Documents my journey extracting and analyzing firmware from an ATWINC1500 module..." name=description><meta content="Sumanth " name=author peddamatham&quot; sam&quot;><link href=https://samrambles.com/projects/hunter-hacking/atwinc1500-iot-module-deep-dive-part-1/index.html rel=canonical><link href=../a-look-inside-a-hunter-pro-hc-controller/index.html rel=prev><link href=../atwinc1500-iot-module-deep-dive-part-2/index.html rel=next><link href=../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.15" name=generator><title>ATWINC1500 IoT Module Deep-Dive (Part 1) - Sam Rambles</title><link href=../../../assets/stylesheets/main.113286f1.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.a0c5b2b5.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CIMB+Plex+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Noto Sans";--md-code-font:"IMB Plex Mono"}</style><link href=../../../assets/stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-RZQGZXT3GC"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RZQGZXT3GC');
</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=black data-md-color-primary=black data-md-color-scheme=slate dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#atwinc1500-iot-module-deep-dive-part-1> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> <em><b>Migration in progress:</b> apologies for broken articles and links.</em> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Sam Rambles" class="md-header__button md-logo" data-md-component=logo href=../../../index.html title="Sam Rambles"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Sam Rambles </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ATWINC1500 IoT Module Deep-Dive (Part 1) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=black data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=black data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg> </label> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=white data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=white data-md-color-scheme=white id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <a aria-label=Share class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=Share> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg> </a> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/peddamat/mkdocs-obsidian title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> peddamat/mkdocs-obsidian </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../../index.html> Home </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../../tags/index.html> Tags </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../../guides/index.html> Guides </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../../musings/my-favorite-technical-articles/index.html> Musings </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../../notes/index.html> Notes </a> </li> <li class=md-tabs__item> <a class="md-tabs__link md-tabs__link--active" href=../../index.html> Projects </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Sam Rambles" class="md-nav__button md-logo" data-md-component=logo href=../../../index.html title="Sam Rambles"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> Sam Rambles </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/peddamat/mkdocs-obsidian title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> peddamat/mkdocs-obsidian </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../index.html> Home </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../tags/index.html> Tags </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../guides/index.html>Guides</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/learning-networking-with-mininet/index.html> Learning Networking With Mininet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/writing-lightroom-classic-plugins/index.html> Writing Lightroom Classic Plugins </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_4 type=checkbox> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> Dotfiles <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Dotfiles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/dotfiles/developing-home-assistant-integrations/index.html> Developing Home Assistant Integrations </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/dotfiles/how-i-overengineered-my-home-network/index.html> How I Overengineered My Home Network </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/dotfiles/how-i-setup-this-blog/index.html> How I Setup This Blog </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/dotfiles/how-i-write-mkdocs-plugins/index.html> How I Write MkDocs Plugins </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/dotfiles/how-to-quickly-setup-a-wireless-mitm-proxy/index.html> How To Quickly Setup A Wireless MitM Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_5 type=checkbox> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> FancyZones <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> FancyZones </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/fancyzones/how-fancyzones-works/index.html> How FancyZones Works </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/fancyzones/how-to-hack-fancyzones/index.html> How To Hack FancyZones </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_6 type=checkbox> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> Home DIY <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Home DIY </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/home-diy/how-to-size-a-solar-battery-install/index.html> How To Size A Solar Battery Install </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_7 type=checkbox> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> Window Hacking With Rust <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Window Hacking With Rust </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/window-hacking-with-rust/creating-a-dll-with-rust/index.html> Creating A DLL With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/window-hacking-with-rust/creating-a-window-with-rust/index.html> Creating A Window With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/window-hacking-with-rust/injecting-dlls-with-rust/index.html> Injecting DLLs With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../guides/window-hacking-with-rust/production-ready-dll-injection/index.html> Production Ready DLL Injection </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Musings <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Musings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../musings/my-favorite-technical-articles/index.html> My Favorite Technical Articles </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../notes/index.html>Notes</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/debugging-tools/index.html> Debugging Tools </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/reverse-engineering-tools/index.html> Reverse Engineering Tools </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> Cheatsheets <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Cheatsheets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/docker-cheatsheet/index.html> Docker Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/git-cheatsheet/index.html> Git Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/python-cheatsheet/index.html> Python Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/rsync-cheatsheet/index.html> Rsync Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/ruby-cheatsheet/index.html> Ruby Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/cheatsheets/tls-cheatsheet/index.html> TLS Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5 type=checkbox> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> Debug Probes <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Debug Probes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/debug-probes/black-magic-probe/index.html> Black Magic Probe </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/debug-probes/segger-j-link/index.html> Segger J-Link </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6 type=checkbox> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> Development Kits <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Development Kits </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/adafruit-feather-m0-wifi/index.html> Adafruit Feather M0 WiFi </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/esp32/index.html> ESP32 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/raspberry-pi/index.html> Raspberry Pi </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6_4 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../notes/development-kits/esp8266/index.html>ESP8266</a> <label for=__nav_5_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_6_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_6_4> <span class="md-nav__icon md-icon"></span> ESP8266 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/esp8266/esp-01/index.html> ESP-01 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/esp8266/wemos-mini/index.html> Wemos Mini </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6_5 type=checkbox> <label class=md-nav__link for=__nav_5_6_5 id=__nav_5_6_5_label tabindex=0> STM32 <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_6_5_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_6_5> <span class="md-nav__icon md-icon"></span> STM32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/stm32/black-pill/index.html> Black Pill </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/stm32/itead-maple/index.html> ITead Maple </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../notes/development-kits/stm32/super-blue-pill/index.html> Super Blue Pill </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../index.html>Projects</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_6_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_2 type=checkbox> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> Apps <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../apps/introducing-recon/index.html> Introducing Recon </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../apps/introducing-sensie/index.html> Introducing Sensie </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../apps/serialmoose-serial-port-sniffer/index.html> SerialMoose Serial Port Sniffer </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_2_4 type=checkbox> <label class=md-nav__link for=__nav_6_2_4 id=__nav_6_2_4_label tabindex=0> CalibreSync <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_2_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_6_2_4> <span class="md-nav__icon md-icon"></span> CalibreSync </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../apps/calibresync/calibresync-development-notes/index.html> CalibreSync Development Notes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_3 type=checkbox> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> Cancer Research <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Cancer Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../cancer-research/generating-complete-genomics-build37-files/index.html> Generating Complete Genomics build37 Files </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../cancer-research/target-aml-data-analysis/index.html> TARGET AML Data Analysis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_4 type=checkbox> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> Home Assistant <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> Home Assistant </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../home-assistant/my-smart-home-devices/index.html> My Smart Home Devices </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../home-assistant/samsung-refrigerator-integration/index.html> Samsung Refrigerator Integration </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../home-assistant/using-pyscript-in-jupyterlab/index.html> Using Pyscript In JupyterLab </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_6_5 type=checkbox> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> Hunter Hacking <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_6_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Hunter Hacking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../a-look-inside-a-hunter-pro-hc-controller/index.html> A Look Inside A Hunter Pro-HC Controller </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> ATWINC1500 IoT Module Deep-Dive (Part 1) <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href=index.html> ATWINC1500 IoT Module Deep-Dive (Part 1) </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#history> History </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#architecture> Architecture </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#memory-map> Memory Map </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#a-quick-primer-on-tls> A Quick Primer On TLS </a> <nav aria-label="A Quick Primer On TLS" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#root-certificate-store> Root Certificate Store </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#tls-server-store> TLS Server Store </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#interfaces> Interfaces </a> <nav aria-label=Interfaces class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#debug-interfaces> Debug Interfaces </a> <nav aria-label="Debug Interfaces" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#debug-uart> Debug UART </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-extraction> Firmware Extraction </a> <nav aria-label="Firmware Extraction" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#hardware-setup> Hardware Setup </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#software-setup> Software Setup </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#executing-dump> Executing Dump </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-analysis> Firmware Analysis </a> <nav aria-label="Firmware Analysis" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#tls-server-store-summary> TLS Server Store Summary </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#dumping-tls-certificates> Dumping TLS Certificates </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-versions> Firmware Versions </a> <nav aria-label="Firmware Versions" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#checking-firmware-version> Checking Firmware Version </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#updating-firmware> Updating Firmware </a> <nav aria-label="Updating Firmware" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#write-firmwareupdater-sketch> Write FirmwareUpdater Sketch </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#update-firmware> Update Firmware </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#further-reading> Further Reading </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#uploading-ssl-root-certificates> Uploading SSL Root Certificates </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#next-steps> Next Steps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=../atwinc1500-iot-module-deep-dive-part-2/index.html> ATWINC1500 IoT Module Deep-Dive (Part 2) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../hands-on-iot-mitm-part-1/index.html> Hands On IoT MitM (Part 1) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../hands-on-iot-mitm-part-2/index.html> Hands On IoT MitM (Part 2) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../reverse-engineering-a-hunter-pro-hc-controller/index.html> Reverse Engineering A Hunter Pro HC Controller </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#history> History </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#architecture> Architecture </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#memory-map> Memory Map </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#a-quick-primer-on-tls> A Quick Primer On TLS </a> <nav aria-label="A Quick Primer On TLS" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#root-certificate-store> Root Certificate Store </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#tls-server-store> TLS Server Store </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#interfaces> Interfaces </a> <nav aria-label=Interfaces class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#debug-interfaces> Debug Interfaces </a> <nav aria-label="Debug Interfaces" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#debug-uart> Debug UART </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-extraction> Firmware Extraction </a> <nav aria-label="Firmware Extraction" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#hardware-setup> Hardware Setup </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#software-setup> Software Setup </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#executing-dump> Executing Dump </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-analysis> Firmware Analysis </a> <nav aria-label="Firmware Analysis" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#tls-server-store-summary> TLS Server Store Summary </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#dumping-tls-certificates> Dumping TLS Certificates </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#firmware-versions> Firmware Versions </a> <nav aria-label="Firmware Versions" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#checking-firmware-version> Checking Firmware Version </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#updating-firmware> Updating Firmware </a> <nav aria-label="Updating Firmware" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#write-firmwareupdater-sketch> Write FirmwareUpdater Sketch </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#update-firmware> Update Firmware </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#further-reading> Further Reading </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#uploading-ssl-root-certificates> Uploading SSL Root Certificates </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#next-steps> Next Steps </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a class=md-tag href=../../../tags/index.html#microchip>microchip</a> <a class=md-tag href=../../../tags/index.html#firmware>firmware</a> <a class=md-tag href=../../../tags/index.html#binary-analysis>binary-analysis</a> <a class=md-tag href=../../../tags/index.html#iot>iot</a> </nav> <div><h1 id=atwinc1500-iot-module-deep-dive-part-1>ATWINC1500 IoT Module Deep-Dive (Part 1)<a class=headerlink href=#atwinc1500-iot-module-deep-dive-part-1 title="Permanent link">¶</a></h1> <p><em>This is the second article in the <a href=../a-look-inside-a-hunter-pro-hc-controller/index.html>Hunter Hacking</a> Project series.</em></p> <p>The Microchip ATWINC1500 IoT Module is a low-cost 802.11 b/g/n WiFi module, popular in the "maker" DIY electronics communities, </p> <ul> <li><a href=https://www.adafruit.com/product/3010>Adafruit Feather M0 WiFi</a> </li> <li><a href=https://learn.adafruit.com/adafruit-atwinc1500-wifi-module-breakout/overview>Adafruit ATWINC1500 WiFi Breakout</a></li> <li><a href=https://docs.arduino.cc/retired/getting-started-guides/ArduinoWiFiShield101>Arduino WiFi Shield</a></li> <li><a href=https://www.arduino.cc/reference/en/libraries/wifi101/ >Arduino WiFi101 Library</a></li> </ul> <p>Support for the module is even baked into Arduino: [WiFi101 / WiFiNINA Firmware Updater]]</p> <hr> <h2 id=history>History<a class=headerlink href=#history title="Permanent link">¶</a></h2> <p>Originally designed by Newport Media Inc., along with the WILC1000/WILC3000 family of WiFi modules, the ATWINC1500 module became part of Atmel's SmartConnect family through the acquisition of Newport Media in 2014.</p> <p>Two years later, the device changed owners once again and became part of Microchip's portfolio through Microchip's acquisition of Atmel in 2016. </p> <p>This is useful to know because the ATWINC1500 codebase bears the hallmarks of this tumultuous history.</p> <hr> <h2 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">¶</a></h2> <p>The module has an embedded Cortus APS3S 32-bit RISC processor with either 2Mb or 4Mb of <em>internal</em> SPI flash. </p> <p>The <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/00002389A.pdf#page=7">Wi-Fi Network Controller Software Design Guide</a> provides this system architecture diagram:</p> <p>![<a href=../atwinc1500-iot-module-deep-dive-part-2/index.html#updating-firmware width=500>Pasted image 20230321215912.png</a></p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230323185229.png><img alt="Pasted image 20230323185229.png" src=../../../assets/images/pasted-image-20230323185229.png width=500></a></p> <hr> <h2 id=memory-map>Memory Map<a class=headerlink href=#memory-map title="Permanent link">¶</a></h2> <p><a href=https://microchip.my.site.com/s/article/Root-Certificate-and-TLS-Certificate-key-storage-in-ATWINC15x0-flash-memory>Root Certificate and TLS Certificate in ATWINC15x0</a> provides the following memory map:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321010550.png><img alt="Pasted image 20230321010550.png" src=../../../assets/images/pasted-image-20230321010550.png width=600></a></p> <p>(the table above is extracted from <a href=https://github.com/Microchip-MPLAB-Harmony/wireless/blob/d7ba22ee20ebb2b4b1c3c3f908292af0167970eb/driver/winc/winc1500_19.6.1/spi_flash/include/spi_flash_map.h#L88>spi_flash_map.h</a>)</p> <p>What immediately stands out are the two regions "Root certificate" and "TLS Server". </p> <p>Why? </p> <p>Well, because trusted root certs are distributed as X.509 certs <strong><em>and</em></strong> private keys are always highly prized. Don't know what that means? We'll get to it.</p> <p>Microchip elaborates: </p> <blockquote> <p>Why is there two location to store certificates in ATWINC15x0 flash? What is the difference between Root Certificate and TLS Certificate/key storage in ATWINC15x0 flash memory?</p> <p>There are two specific locations to store different certificates into WINC flash memory:</p> <ol> <li> <p>X.509 Root Certificate storage - This is for the ATWINC1500 TLS Client to verify the TLS server certificate (A self signed public key certificate that identify the authority) from the server that the module is trying to connect. (eg. When ATWINC1500 is trying to connect to google.com, device will use the "GlobalSign Root CA" certificate stored in the Root Certificate folder to verify the server certificate) </p> </li> <li> <p>ATWINC1500 TLS Server certificate storage - For proper operation of both the TLS server and TLS client authentication, the ATWINC1500 device must have a certificate/private key pair assigned to it.</p> </li> </ol> </blockquote> <p>Let's see what else we can find.</p> <hr> <h2 id=a-quick-primer-on-tls>A Quick Primer On TLS<a class=headerlink href=#a-quick-primer-on-tls title="Permanent link">¶</a></h2> <p><em>Well versed in TLS? [skip this section]]</em></p> <p>Transport Layer Security (TLS) is a cryptographic protocol used to secure communication over the internet. It is widely used to provide secure communication for web traffic, email, and other applications that require secure communication. TLS uses a combination of symmetric and asymmetric encryption to provide confidentiality, integrity, and authenticity of the data exchanged between two parties.</p> <p>One of the key components of TLS is the <strong>X.509 digital certificate</strong>, which is used to verify the identity of the communicating parties. X.509 certificates contain information such as the name of the entity being identified, the entity's public key, the digital signature of the certificate issuer (<strong>Certificate Authority</strong>) which signed the certificate, and the validity period of the certificate.</p> <p>To use TLS, both parties need to have a pair of private and public keys. The <strong>private key</strong> is kept secret by the owner and is used to encrypt and decrypt data. The <strong>public key</strong>, on the other hand, is freely distributed and is used to encrypt data that can only be decrypted by the corresponding private key.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The ATWINC1500 stores these private and public keys in the <strong>TLS Cert Store</strong>.</p> </div> <p>When a client initiates a TLS connection with a server, the server sends its <strong>X.509 certificate</strong> to the client. The client then verifies the authenticity of the certificate by checking the digital signature of the certificate issuer (<strong>Certificate Authority</strong>). If the certificate is valid, the client can use the public key in the certificate to encrypt data that can only be decrypted by the server's private key.</p> <p>Certificate Authorities (CA) are trusted third-party entities that issue X.509 certificates. A CA verifies the identity of an entity and signs its certificate to provide a chain of trust. This chain of trust can be traced back to a <strong>Root CA</strong>, which is trusted by default in most operating systems and web browsers.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The ATWINC1500 stores the trusted Root CA certificates in the Root Cert Store. If a server returns a certificate signed by a certificate stored in the <strong>Root Cert Store</strong>, the ATWINC1500 will assume it can trust it, and will allow the connection.</p> </div> <p>Finally, TLS uses Abstract Syntax Notation One (ASN.1) to encode data in a compact and efficient format. ASN.1 is a standard that defines a notation for describing data structures that can be encoded and decoded in a machine-independent way. TLS uses ASN.1 to encode and transmit X.509 certificates, keys, and other cryptographic parameters in a compact format that can be easily decoded by the receiving party.</p> <p>To summarize: 1. X.509 is a standard defining the file format of certificates. 2. A certificate is basically a public key which has been signed by someone else's private key. 3. "Someone else" is a usually a "Certificate Authority", but certificates can also be self-signed. 4. Certificates also bundle identity data (common name, address, etc.) along with the public key, and the kaboodle is signed by the CA. 5. TLS private and public keys are stored in a format called ASN.1, which is translated into PEM, DER, CER, and other formats, as needed.</p> <div class="admonition info"> <p class=admonition-title>Need more detail?</p> <p>Section 7 of the <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/00002389A.pdf#page=42">Wi-Fi Network Controller Software Design Guide</a> contains a wealth of additional information.</p> </div> <hr> <h3 id=root-certificate-store>Root Certificate Store<a class=headerlink href=#root-certificate-store title="Permanent link">¶</a></h3> <p>The <a href=http://ww1.microchip.com/downloads/en/DeviceDoc/00002389A.pdf>Wi-Fi Network Controller Software Design Guide</a> explains that:</p> <blockquote> <p>Before connecting to a TLS Server, the root certificate of the server must be installed on the ATWINC15x0...</p> </blockquote> <p>![<a href=index.html#root-certificate-store width=500>Pasted image 20230314001127.png</a></p> <p>And <a href="http://ww1.microchip.com/downloads/en/DeviceDoc/00002378B.pdf#page=21">Integrated Serial Flash and Memory Download Procedure</a> describes the procedure for installing certificates:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321121702.png><img alt="Pasted image 20230321121702.png" src=../../../assets/images/pasted-image-20230321121702.png width=500></a></p> <hr> <h3 id=tls-server-store>TLS Server Store<a class=headerlink href=#tls-server-store title="Permanent link">¶</a></h3> <p>The <a href=http://ww1.microchip.com/downloads/en/DeviceDoc/50002599A.pdf>Transport Layer Security (TLS) User's Guide</a> describes the procedure for installing certificates:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230314002137.png><img alt="Pasted image 20230314002137.png" src=../../../assets/images/pasted-image-20230314002137.png width=500></a> <a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230314095604.png><img alt="Pasted image 20230314095604.png" src=../../../assets/images/pasted-image-20230314095604.png width=500></a></p> <hr> <h2 id=interfaces>Interfaces<a class=headerlink href=#interfaces title="Permanent link">¶</a></h2> <p>Page 7 of the datasheet contains a pin-out diagram which indicates that the module has the following interfaces: UART, SPI, and I2C.</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230313162712.png><img alt="Pasted image 20230313162712.png" src=../../../assets/images/pasted-image-20230313162712.png width=300></a></p> <p>The datasheet explains that the SPI interface is used to communicate with a host microcontroller.</p> <h3 id=debug-interfaces>Debug Interfaces<a class=headerlink href=#debug-interfaces title="Permanent link">¶</a></h3> <p>Page 20 of the datasheet indicates that the UART and I2C interfaces are for "debugging purposes" only:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230313232000.png><img alt="Pasted image 20230313232000.png" src=../../../assets/images/pasted-image-20230313232000.png width=300></a></p> <h4 id=debug-uart>Debug UART<a class=headerlink href=#debug-uart title="Permanent link">¶</a></h4> <p><a href=http://ww1.microchip.com/downloads/en/DeviceDoc/00002378B.pdf>Integrated Serial Flash and Memory Download Procedure</a> explains that to perform a serial flash download, the chip needs to be in the right "bootloader state":</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230314002330.png><img alt="Pasted image 20230314002330.png" src=../../../assets/images/pasted-image-20230314002330.png width=500></a></p> <p>The <a href=https://onlinedocs.microchip.com/pr/GUID-99D87AEC-CC09-454B-A204-1ACBCFB73834-en-US-2/index.html?GUID-2610EC8F-27F5-49A6-84E9-41AB095AF71B>online documentation</a> provides this handy diagram which explains what <code>m2m_bsp_init()</code> is doing behind the scenes:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230320214800.png><img alt="Pasted image 20230320214800.png" src=../../../assets/images/pasted-image-20230320214800.png width=500></a></p> <hr> <h2 id=firmware-extraction>Firmware Extraction<a class=headerlink href=#firmware-extraction title="Permanent link">¶</a></h2> <p>The <a href=https://microchip.my.site.com/s/article/WINC1500---Using-Image-Tool-to-build-firmware-image-and-gain-table-and-program-using-serial-bridge>WINC1500: Using Image Tool to build firmware image, gain table and program using serial bridge</a> mentions that the module's firmware can be extracted by connecting a 3.3v TTL USB-to-Serial cable to pins UART_TXD and UART_RXD of module and executing the following command:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>winc_programmer_uart.exe<span class=w> </span>-p<span class=w> </span>COM4<span class=w> </span>-d<span class=w> </span>winc1500<span class=w> </span>-r<span class=w> </span>-pfw<span class=w> </span>programmer_firmware.bin<span class=w> </span>-o<span class=w> </span>atwinc1500-original.bin
</span></code></pre></div> <p>Let's give it a shot!</p> <details class=info> <summary>Alternatively, you can use the Microchip <code>image_cloner.exe</code> tool</summary> <p>You can download a compiled binary: <a href=https://github.com/makerdiary/pitaya-go/tree/master/utils/wifi/Tools/image_cloner/debug_uart>here</a></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>.\image_cloner.exe -span 500000 -out_path atwinc1500-original.bin
</span></code></pre></div> </details> <hr> <h3 id=hardware-setup>Hardware Setup<a class=headerlink href=#hardware-setup title="Permanent link">¶</a></h3> <p>I will be using the above method to extract firmware from an Adafruit Feather M0 WiFi development module using a cheapo CP2102 USB-TTL UART module:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/images.jpg><img alt=images.jpg src=../../../assets/images/images.jpg></a> <a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230313162712.png><img alt="Pasted image 20230313162712.png" src=../../../assets/images/pasted-image-20230313162712.png width=300></a></p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321012516.png><img alt="Pasted image 20230321012516.png" src=../../../assets/images/pasted-image-20230321012516.png width=400></a> <a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321012421.png><img alt="Pasted image 20230321012421.png" src=../../../assets/images/pasted-image-20230321012421.png width=225></a></p> <p>Since I don't have a fancy POGO rig, I made a simple jig to hold the leads in place while the firmware is extracting:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321012453.png><img alt="Pasted image 20230321012453.png" src=../../../assets/images/pasted-image-20230321012453.png width=200></a> </p> <hr> <h3 id=software-setup>Software Setup<a class=headerlink href=#software-setup title="Permanent link">¶</a></h3> <p>As mentioned in <a href=index.html#debug-interfaces>ATWINC1500 IoT Module Deep-Dive (Part 1)#Debug Interfaces</a>, to enable the debug interfaces, the ATWINC1500 module needs a specific boot-up sequence.</p> <p>Since the Adafruit Feather M0 is supported by Arduino, I wrote a simple sketch:</p> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=cp>#define CE_PIN 2</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=cp>#define RST_PIN 4</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=kt>void</span><span class=w> </span><span class=nf>setup</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>  </span><span class=n>pinMode</span><span class=p>(</span><span class=n>LED_BUILTIN</span><span class=p>,</span><span class=w> </span><span class=n>OUTPUT</span><span class=p>);</span>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=w>  </span><span class=n>pinMode</span><span class=p>(</span><span class=n>CE_PIN</span><span class=p>,</span><span class=w> </span><span class=n>OUTPUT</span><span class=p>);</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a><span class=w>  </span><span class=n>pinMode</span><span class=p>(</span><span class=n>RST_PIN</span><span class=p>,</span><span class=w> </span><span class=n>OUTPUT</span><span class=p>);</span>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>CE_PIN</span><span class=p>,</span><span class=w> </span><span class=n>LOW</span><span class=p>);</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>RST_PIN</span><span class=p>,</span><span class=w> </span><span class=n>LOW</span><span class=p>);</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>  </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
</span><span id=__span-2-12><a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>CE_PIN</span><span class=p>,</span><span class=w> </span><span class=n>HIGH</span><span class=p>);</span>
</span><span id=__span-2-13><a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a><span class=w>  </span><span class=n>delay</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>
</span><span id=__span-2-14><a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>RST_PIN</span><span class=p>,</span><span class=w> </span><span class=n>HIGH</span><span class=p>);</span>
</span><span id=__span-2-15><a href=#__codelineno-2-15 id=__codelineno-2-15 name=__codelineno-2-15></a><span class=p>}</span>
</span><span id=__span-2-16><a href=#__codelineno-2-16 id=__codelineno-2-16 name=__codelineno-2-16></a>
</span><span id=__span-2-17><a href=#__codelineno-2-17 id=__codelineno-2-17 name=__codelineno-2-17></a><span class=kt>void</span><span class=w> </span><span class=nf>loop</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-18><a href=#__codelineno-2-18 id=__codelineno-2-18 name=__codelineno-2-18></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>LED_BUILTIN</span><span class=p>,</span><span class=w> </span><span class=n>HIGH</span><span class=p>);</span><span class=w>  </span><span class=c1>// turn the LED on (HIGH is the voltage level)</span>
</span><span id=__span-2-19><a href=#__codelineno-2-19 id=__codelineno-2-19 name=__codelineno-2-19></a><span class=w>  </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span><span class=w>                      </span><span class=c1>// wait for a second</span>
</span><span id=__span-2-20><a href=#__codelineno-2-20 id=__codelineno-2-20 name=__codelineno-2-20></a><span class=w>  </span><span class=n>digitalWrite</span><span class=p>(</span><span class=n>LED_BUILTIN</span><span class=p>,</span><span class=w> </span><span class=n>LOW</span><span class=p>);</span><span class=w>   </span><span class=c1>// turn the LED off by making the voltage LOW</span>
</span><span id=__span-2-21><a href=#__codelineno-2-21 id=__codelineno-2-21 name=__codelineno-2-21></a><span class=w>  </span><span class=n>delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span><span class=w>   </span>
</span><span id=__span-2-22><a href=#__codelineno-2-22 id=__codelineno-2-22 name=__codelineno-2-22></a><span class=p>}</span>
</span></code></pre></div> <details class=note> <summary>Don't forget to set the Port!</summary> <p>The bossac programmer will silently fail if you forget to set the port.</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230320231118.png><img alt="Pasted image 20230320231118.png" src=../../../assets/images/pasted-image-20230320231118.png width=500></a></p> </details> <h3 id=executing-dump>Executing Dump<a class=headerlink href=#executing-dump title="Permanent link">¶</a></h3> <p><strong>Adafruit Feather M0 Firmware Dump</strong></p> <div class="language-bash highlight"><span class=filename>Adafruit Feather M0</span><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>$<span class=w> </span>winc_programmer_uart.exe<span class=w> </span>-p<span class=w> </span>COM4<span class=w> </span>-d<span class=w> </span>winc1500<span class=w> </span>-r<span class=w> </span>-pfw<span class=w> </span>programmer_firmware.bin<span class=w> </span>-o<span class=w> </span>atwinc1500-adafruit.bin
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a>WINC<span class=w> </span>Programming<span class=w> </span>Tool<span class=w> </span><span class=m>2</span>.0.1<span class=w> </span><span class=o>[</span>ceebe5f<span class=o>]</span><span class=w> </span><span class=o>(</span>Apr<span class=w> </span><span class=m>20</span><span class=w> </span><span class=m>2022</span><span class=o>)</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a>Copyright<span class=w> </span><span class=o>(</span>C<span class=o>)</span><span class=w> </span>Microchip<span class=w> </span>Technology<span class=w> </span>Inc.<span class=w> </span><span class=m>2022</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a>hardware<span class=w> </span>WINC<span class=w> </span>serial<span class=w> </span>bridge<span class=w> </span>found
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a>chip<span class=w> </span>ID<span class=w> </span>is<span class=w> </span>0x001503a0
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a>programming<span class=w> </span>firmware<span class=w> </span>file:<span class=w> </span>programmer_firmware.bin
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a>reinitialise<span class=w> </span>onchip<span class=w> </span>uart<span class=w> </span>to<span class=w> </span><span class=m>500000</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a>waiting<span class=w> </span><span class=k>for</span><span class=w> </span>firmware<span class=w> </span>to<span class=w> </span>run
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a>flash<span class=w> </span>ID<span class=w> </span>0xc21320c2
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a>flash<span class=w> </span>size<span class=w> </span>is<span class=w> </span><span class=m>4</span><span class=w> </span>Mb
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a>
</span><span id=__span-3-14><a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a>begin<span class=w> </span><span class=nb>read</span><span class=w> </span>operation
</span><span id=__span-3-15><a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a>
</span><span id=__span-3-16><a href=#__codelineno-3-16 id=__codelineno-3-16 name=__codelineno-3-16></a><span class=w> </span>0x000000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x008000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x010000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x018000:<span class=o>[</span>rrrrrrrr<span class=o>]</span>
</span><span id=__span-3-17><a href=#__codelineno-3-17 id=__codelineno-3-17 name=__codelineno-3-17></a><span class=w> </span>0x020000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x028000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x030000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x038000:<span class=o>[</span>rrrrrrrr<span class=o>]</span>
</span><span id=__span-3-18><a href=#__codelineno-3-18 id=__codelineno-3-18 name=__codelineno-3-18></a><span class=w> </span>0x040000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x048000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x050000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x058000:<span class=o>[</span>rrrrrrrr<span class=o>]</span>
</span><span id=__span-3-19><a href=#__codelineno-3-19 id=__codelineno-3-19 name=__codelineno-3-19></a><span class=w> </span>0x060000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x068000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x070000:<span class=o>[</span>rrrrrrrr<span class=o>]</span><span class=w> </span>0x078000:<span class=o>[</span>rrrrrrrr<span class=o>]</span>
</span><span id=__span-3-20><a href=#__codelineno-3-20 id=__codelineno-3-20 name=__codelineno-3-20></a>
</span><span id=__span-3-21><a href=#__codelineno-3-21 id=__codelineno-3-21 name=__codelineno-3-21></a>output<span class=w> </span>file<span class=w> </span>format<span class=w> </span>not<span class=w> </span>specified,<span class=w> </span>assuming<span class=w> </span><span class=s1>'raw'</span>
</span></code></pre></div> <details class=warning> <summary>If you're using an older version of <code>winc_programmer_uart.exe</code> you might get the following error</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a>$<span class=w> </span>winc_programmer_uart.exe<span class=w> </span>-p<span class=w> </span>COM4<span class=w> </span>-d<span class=w> </span>winc1500<span class=w> </span>-r<span class=w> </span>-pfw<span class=w> </span>programmer_firmware.bin<span class=w> </span>-o<span class=w> </span>atwinc1500-adafruit.bin
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a>WINC<span class=w> </span>Programming<span class=w> </span>Tool<span class=w> </span><span class=m>1</span>.0.3<span class=w> </span><span class=o>[</span>r708<span class=o>]</span><span class=w> </span><span class=o>(</span>Jul<span class=w> </span><span class=m>28</span><span class=w> </span><span class=m>2020</span><span class=o>)</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a>Copyright<span class=w> </span><span class=o>(</span>C<span class=o>)</span><span class=w> </span>Microchip<span class=w> </span>Technology<span class=w> </span>Inc.<span class=w> </span><span class=m>2020</span>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a>hardware<span class=w> </span>WINC<span class=w> </span>serial<span class=w> </span>bridge<span class=w> </span>found
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>chip<span class=w> </span>ID<span class=w> </span>is<span class=w> </span>0x001503a0
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a>programming<span class=w> </span>firmware<span class=w> </span>file:<span class=w> </span>..<span class=se>\p</span>rogrammer_firmware<span class=se>\r</span>elease3A0<span class=se>\p</span>rogrammer_firmware.bin
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a>reinitialise<span class=w> </span>onchip<span class=w> </span>uart<span class=w> </span>to<span class=w> </span><span class=m>500000</span>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a>waiting<span class=w> </span><span class=k>for</span><span class=w> </span>firmware<span class=w> </span>to<span class=w> </span>runerror<span class=o>(</span>uart_read:61<span class=o>)</span>:<span class=w> </span>incomplete<span class=w> </span><span class=nb>read</span><span class=w> </span>from<span class=w> </span>UART
</span><span id=__span-4-11><a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>error:<span class=w> </span>failed<span class=w> </span>to<span class=w> </span>receive<span class=w> </span><span class=nb>read</span><span class=w> </span>register<span class=w> </span>response
</span><span id=__span-4-12><a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a>error:<span class=w> </span>failed<span class=w> </span>to<span class=w> </span>initialise<span class=w> </span>programming<span class=w> </span>firmware<span class=w> </span><span class=s1>'..\programmer_firmware\release3A0\programmer_firmware.bin'</span><span class=w> </span>on<span class=w> </span>device
</span></code></pre></div> </details> <hr> <h2 id=firmware-analysis>Firmware Analysis<a class=headerlink href=#firmware-analysis title="Permanent link">¶</a></h2> <p>Now that we've got a fresh binary sitting in <code>atwinc1500-adafruit.bin</code>, let's see what's inside.</p> <p>Using the <code>tls_cert_flash_tool.exe</code> mentioned in [TLS Server Store]] we can investigate the TLS Store.</p> <h3 id=tls-server-store-summary>TLS Server Store Summary<a class=headerlink href=#tls-server-store-summary title="Permanent link">¶</a></h3> <p>Due to a bug, the tool reports the "WINCRootCA" twice, so there are only 4 certs stored in the TLS Store:</p> <p>```bash hl_lines="" $ tls_cert_flash_tool.exe read -fwimg atwinc1500-adafruit.bin -ecdsa -rsa -dir</p> <hr> <ul> <li>WINC1500 TLS Certificate Flash Tool *</li> </ul> <hr> <p><rsa certificate chain file list></rsa></p> <p>PRIV_00ddb578c5a531f273 1208 PRIVATE KEY CERT_00ddb578c5a531f273 950 CERTIFICATE *.winc.atmel.com CERT_00def74d6dfa50e85c 1003 CERTIFICATE WINCRootCA</p> <p><ecdsa certificate chain file list></ecdsa></p> <p>CERT_00f4bb2e4a6fd5ae51 579 CERTIFICATE *.winc.atmel.com CERT_00ddefc26b1df1c50d 754 CERTIFICATE AtmelEccCA CERT_00def74d6dfa50e85c 1003 CERTIFICATE WINCRootCA</p> <p><em>=</em>=<em> X509 </em>=<em>=</em> Subject &lt;*.winc.atmel.com&gt; Issuer <wincrootca> &lt;2016-06-12 12:29:03&gt; to &lt;2021-12-03 12:29:03&gt;</wincrootca></p> <p><em>=</em>=<em> X509 </em>=<em>=</em> Subject &lt;*.winc.atmel.com&gt; Issuer <atmeleccca> &lt;2016-07-18 13:31:13&gt; to &lt;2023-05-23 13:31:13&gt; <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>---
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a>
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a>### Dumping TLS Private Key
</span><span id=__span-5-4><a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a>
</span><span id=__span-5-5><a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a>```bash
</span><span id=__span-5-6><a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a>$ tls_cert_flash_tool.exe read -fwimg atwinc1500-adafruit.bin -rsa -privkey
</span><span id=__span-5-7><a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a>
</span><span id=__span-5-8><a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a>******************************************
</span><span id=__span-5-9><a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a>*   WINC1500 TLS Certificate Flash Tool  *
</span><span id=__span-5-10><a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a>******************************************
</span><span id=__span-5-11><a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a>Private-Key: (2048 bit)
</span><span id=__span-5-12><a href=#__codelineno-5-12 id=__codelineno-5-12 name=__codelineno-5-12></a>modulus (N):
</span><span id=__span-5-13><a href=#__codelineno-5-13 id=__codelineno-5-13 name=__codelineno-5-13></a>        AD 62 49 6E 87 72 FA D4 E0 1A 48 1C B8 B4 5E D1
</span><span id=__span-5-14><a href=#__codelineno-5-14 id=__codelineno-5-14 name=__codelineno-5-14></a>        9D B9 EC A4 99 86 6D 23 9E 10 BD 8D D3 07 FA 58
</span><span id=__span-5-15><a href=#__codelineno-5-15 id=__codelineno-5-15 name=__codelineno-5-15></a>        63 D1 E9 FB 8D A5 9B 61 83 68 4D 17 C8 35 E1 85
</span><span id=__span-5-16><a href=#__codelineno-5-16 id=__codelineno-5-16 name=__codelineno-5-16></a>        89 85 6F 29 91 CC AC A4 B1 3C E2 F4 E3 81 9E 30
</span><span id=__span-5-17><a href=#__codelineno-5-17 id=__codelineno-5-17 name=__codelineno-5-17></a>        8A 86 11 FF D4 97 C0 DD B1 14 64 44 14 C9 F9 BA
</span><span id=__span-5-18><a href=#__codelineno-5-18 id=__codelineno-5-18 name=__codelineno-5-18></a>        59 1B 8F 82 07 23 D0 00 C1 AD 95 BC 28 39 19 87
</span><span id=__span-5-19><a href=#__codelineno-5-19 id=__codelineno-5-19 name=__codelineno-5-19></a>        FB F3 10 5E 25 EF FB 8A 54 CA 96 1F A2 03 1C 90
</span><span id=__span-5-20><a href=#__codelineno-5-20 id=__codelineno-5-20 name=__codelineno-5-20></a>        DB 51 44 93 C9 11 EF 3F 93 34 66 36 6B 48 44 61
</span><span id=__span-5-21><a href=#__codelineno-5-21 id=__codelineno-5-21 name=__codelineno-5-21></a>        14 0A FE 15 AB 53 74 0B F7 30 F8 7B 3E 55 98 32
</span><span id=__span-5-22><a href=#__codelineno-5-22 id=__codelineno-5-22 name=__codelineno-5-22></a>        10 94 53 FA BC C4 C2 0D CE 91 F5 3D 50 3B 69 A8
</span><span id=__span-5-23><a href=#__codelineno-5-23 id=__codelineno-5-23 name=__codelineno-5-23></a>        3A AF 03 09 C4 A4 74 4C 62 49 98 C9 FC 1E 9B 7F
</span><span id=__span-5-24><a href=#__codelineno-5-24 id=__codelineno-5-24 name=__codelineno-5-24></a>        A7 9B 2D A4 BF C2 AE 42 D0 E7 09 27 D2 E4 CD DC
</span><span id=__span-5-25><a href=#__codelineno-5-25 id=__codelineno-5-25 name=__codelineno-5-25></a>        D0 88 3B 43 20 F2 15 0D 32 92 8E 4D 9E C6 E9 C6
</span><span id=__span-5-26><a href=#__codelineno-5-26 id=__codelineno-5-26 name=__codelineno-5-26></a>        DE 7D 65 01 22 E1 B7 60 6F C0 27 11 7C F7 FA FD
</span><span id=__span-5-27><a href=#__codelineno-5-27 id=__codelineno-5-27 name=__codelineno-5-27></a>        7C FE 5B 23 A7 00 56 DF 99 ED 1A 44 CF D6 BA F9
</span><span id=__span-5-28><a href=#__codelineno-5-28 id=__codelineno-5-28 name=__codelineno-5-28></a>        8A 09 6A D3 54 81 55 25 86 7D C0 7C 68 CC FF 31
</span><span id=__span-5-29><a href=#__codelineno-5-29 id=__codelineno-5-29 name=__codelineno-5-29></a>publicExponent (e):
</span><span id=__span-5-30><a href=#__codelineno-5-30 id=__codelineno-5-30 name=__codelineno-5-30></a>        01 00 01
</span><span id=__span-5-31><a href=#__codelineno-5-31 id=__codelineno-5-31 name=__codelineno-5-31></a>privateExponent (d):
</span><span id=__span-5-32><a href=#__codelineno-5-32 id=__codelineno-5-32 name=__codelineno-5-32></a>        3D 37 5D 9B E3 C0 E9 E4 ED 36 FA 4D 01 BD D5 58
</span><span id=__span-5-33><a href=#__codelineno-5-33 id=__codelineno-5-33 name=__codelineno-5-33></a>        87 2A D4 ED 8C B3 14 A7 A5 B0 5D 6C CC 9C 9D 7C
</span><span id=__span-5-34><a href=#__codelineno-5-34 id=__codelineno-5-34 name=__codelineno-5-34></a>        45 CA 20 A5 CB 6E 34 3D 2A AB 51 C4 DA D0 83 4E
</span><span id=__span-5-35><a href=#__codelineno-5-35 id=__codelineno-5-35 name=__codelineno-5-35></a>        A5 AE 72 00 28 55 2E 83 7B 7C 76 D9 65 D6 26 E7
</span><span id=__span-5-36><a href=#__codelineno-5-36 id=__codelineno-5-36 name=__codelineno-5-36></a>        16 91 9D 9B 49 11 47 6C 3E 90 67 92 4E 10 BD D6
</span><span id=__span-5-37><a href=#__codelineno-5-37 id=__codelineno-5-37 name=__codelineno-5-37></a>        58 8D CD 8E 68 3C F1 BC C2 A5 2A 1F E3 C7 BD 46
</span><span id=__span-5-38><a href=#__codelineno-5-38 id=__codelineno-5-38 name=__codelineno-5-38></a>        F0 E2 F1 DD 7B E1 8E 5B 59 F2 A9 2C 84 04 3B 3A
</span><span id=__span-5-39><a href=#__codelineno-5-39 id=__codelineno-5-39 name=__codelineno-5-39></a>        BD E4 A4 A4 D5 32 3A D9 A4 7C B4 B5 F4 0C F0 EF
</span><span id=__span-5-40><a href=#__codelineno-5-40 id=__codelineno-5-40 name=__codelineno-5-40></a>        0C 86 C6 B1 6C EA 63 D5 79 D5 20 37 C0 8E AF 0E
</span><span id=__span-5-41><a href=#__codelineno-5-41 id=__codelineno-5-41 name=__codelineno-5-41></a>        20 E9 6B 91 D4 FB 15 B8 FF E4 1E 80 20 52 3A 7F
</span><span id=__span-5-42><a href=#__codelineno-5-42 id=__codelineno-5-42 name=__codelineno-5-42></a>        C2 83 92 22 AF AC 16 9D 93 0D E6 56 3A 84 E8 B6
</span><span id=__span-5-43><a href=#__codelineno-5-43 id=__codelineno-5-43 name=__codelineno-5-43></a>        77 56 77 AF 23 E3 68 DC 91 14 C8 FC 61 47 57 8C
</span><span id=__span-5-44><a href=#__codelineno-5-44 id=__codelineno-5-44 name=__codelineno-5-44></a>        7D B6 DA 19 13 2A D2 DE D7 E5 BD 59 70 86 AF 39
</span><span id=__span-5-45><a href=#__codelineno-5-45 id=__codelineno-5-45 name=__codelineno-5-45></a>        AD CB 29 75 20 CB 36 93 D3 57 34 74 E0 26 B4 B7
</span><span id=__span-5-46><a href=#__codelineno-5-46 id=__codelineno-5-46 name=__codelineno-5-46></a>        9B 37 49 F8 0E 11 FF 42 72 9B 93 5B 78 BA A8 55
</span><span id=__span-5-47><a href=#__codelineno-5-47 id=__codelineno-5-47 name=__codelineno-5-47></a>        4B 5F 78 E9 99 DE ED 9C 49 28 FC AC 9B B4 E4 C1
</span><span id=__span-5-48><a href=#__codelineno-5-48 id=__codelineno-5-48 name=__codelineno-5-48></a>prim1 (p):
</span><span id=__span-5-49><a href=#__codelineno-5-49 id=__codelineno-5-49 name=__codelineno-5-49></a>        E1 C9 49 53 EB 34 15 5B 0D E5 01 38 49 4E 0B 40
</span><span id=__span-5-50><a href=#__codelineno-5-50 id=__codelineno-5-50 name=__codelineno-5-50></a>        00 C6 AF 4C C1 EB 59 ED 07 69 5D 40 D7 82 14 21
</span><span id=__span-5-51><a href=#__codelineno-5-51 id=__codelineno-5-51 name=__codelineno-5-51></a>        3E 39 9F 94 F1 B8 FB EA B9 91 FB 7C F0 0D 96 F4
</span><span id=__span-5-52><a href=#__codelineno-5-52 id=__codelineno-5-52 name=__codelineno-5-52></a>        F5 30 81 D5 65 4D 7C 5A 19 35 C4 2D 04 C3 22 F1
</span><span id=__span-5-53><a href=#__codelineno-5-53 id=__codelineno-5-53 name=__codelineno-5-53></a>        73 12 4F 68 97 7A 66 71 D7 68 E5 22 41 B3 AF C4
</span><span id=__span-5-54><a href=#__codelineno-5-54 id=__codelineno-5-54 name=__codelineno-5-54></a>        C4 46 49 40 D5 7A FC EC F4 8D 02 EE 95 C4 01 F2
</span><span id=__span-5-55><a href=#__codelineno-5-55 id=__codelineno-5-55 name=__codelineno-5-55></a>        C5 E7 13 DD 62 D3 FF 46 18 BA 05 24 5C D7 3E 1C
</span><span id=__span-5-56><a href=#__codelineno-5-56 id=__codelineno-5-56 name=__codelineno-5-56></a>        C7 7B 84 66 D8 DC 0C 10 AE FD 8B 53 FF AE 51 19
</span><span id=__span-5-57><a href=#__codelineno-5-57 id=__codelineno-5-57 name=__codelineno-5-57></a>prime2 (q):
</span><span id=__span-5-58><a href=#__codelineno-5-58 id=__codelineno-5-58 name=__codelineno-5-58></a>        C4 95 DD 3F 4D E1 D3 75 1D CC 3C 82 82 40 4C C7
</span><span id=__span-5-59><a href=#__codelineno-5-59 id=__codelineno-5-59 name=__codelineno-5-59></a>        66 A5 71 A9 A5 DE F1 1A ED FA B5 6F 4A 92 E9 8C
</span><span id=__span-5-60><a href=#__codelineno-5-60 id=__codelineno-5-60 name=__codelineno-5-60></a>        05 1B 4A 67 D3 8A B7 53 6C 83 DD A5 31 34 92 D0
</span><span id=__span-5-61><a href=#__codelineno-5-61 id=__codelineno-5-61 name=__codelineno-5-61></a>        AF 3D FF 06 00 45 C4 A8 12 DF E1 29 8E 93 09 B9
</span><span id=__span-5-62><a href=#__codelineno-5-62 id=__codelineno-5-62 name=__codelineno-5-62></a>        99 25 12 1F 94 F1 09 B8 14 67 9D 35 2A D2 AF 39
</span><span id=__span-5-63><a href=#__codelineno-5-63 id=__codelineno-5-63 name=__codelineno-5-63></a>        05 92 88 F4 DC D3 5E 55 DA 99 C2 0E 8F C2 DC 3D
</span><span id=__span-5-64><a href=#__codelineno-5-64 id=__codelineno-5-64 name=__codelineno-5-64></a>        6B 98 22 40 80 72 6D 1F D9 E2 87 6F 60 33 16 6A
</span><span id=__span-5-65><a href=#__codelineno-5-65 id=__codelineno-5-65 name=__codelineno-5-65></a>        08 B3 2E 61 63 7C EE 69 BF 06 71 9D 1A DF 69 D9
</span><span id=__span-5-66><a href=#__codelineno-5-66 id=__codelineno-5-66 name=__codelineno-5-66></a>exponent1 (dP):
</span><span id=__span-5-67><a href=#__codelineno-5-67 id=__codelineno-5-67 name=__codelineno-5-67></a>        12 0E 5F CF D7 3A 66 0E CF 10 A6 45 53 0F 6B B4
</span><span id=__span-5-68><a href=#__codelineno-5-68 id=__codelineno-5-68 name=__codelineno-5-68></a>        E5 9A FD FF DC 6E 2E D5 D6 C6 E5 4F 3F 2C C6 E1
</span><span id=__span-5-69><a href=#__codelineno-5-69 id=__codelineno-5-69 name=__codelineno-5-69></a>        55 B1 94 02 7C 46 37 D7 30 99 ED 0B B3 C2 D2 74
</span><span id=__span-5-70><a href=#__codelineno-5-70 id=__codelineno-5-70 name=__codelineno-5-70></a>        AA 7B 03 97 06 2F E9 26 E7 67 36 56 07 50 77 A5
</span><span id=__span-5-71><a href=#__codelineno-5-71 id=__codelineno-5-71 name=__codelineno-5-71></a>        E9 76 E8 64 CB E0 5C FA F3 A8 0E D2 EB 80 2C 29
</span><span id=__span-5-72><a href=#__codelineno-5-72 id=__codelineno-5-72 name=__codelineno-5-72></a>        47 2C FB C4 B4 8D CE 56 40 C4 5A 1C AC 5B 6D 70
</span><span id=__span-5-73><a href=#__codelineno-5-73 id=__codelineno-5-73 name=__codelineno-5-73></a>        75 C5 22 00 8D 5B B8 C9 69 46 CF 0C 76 64 3C 32
</span><span id=__span-5-74><a href=#__codelineno-5-74 id=__codelineno-5-74 name=__codelineno-5-74></a>        5E FD 90 BC 0C D1 A4 21 5D 6D 27 4C 43 61 34 59
</span><span id=__span-5-75><a href=#__codelineno-5-75 id=__codelineno-5-75 name=__codelineno-5-75></a>exponent2 (dQ):
</span><span id=__span-5-76><a href=#__codelineno-5-76 id=__codelineno-5-76 name=__codelineno-5-76></a>        4F 8B 2C 48 EF 24 8F 41 76 5B 2B A8 CB 37 65 59
</span><span id=__span-5-77><a href=#__codelineno-5-77 id=__codelineno-5-77 name=__codelineno-5-77></a>        D1 C8 E3 E2 F7 40 EC 62 2F 25 20 C0 F5 75 D8 96
</span><span id=__span-5-78><a href=#__codelineno-5-78 id=__codelineno-5-78 name=__codelineno-5-78></a>        55 82 A3 6A BB 88 07 81 F4 08 AF 68 A6 2E 55 B1
</span><span id=__span-5-79><a href=#__codelineno-5-79 id=__codelineno-5-79 name=__codelineno-5-79></a>        A7 16 F8 D7 DE C8 5C 38 7D DA A4 EB 01 CB B1 45
</span><span id=__span-5-80><a href=#__codelineno-5-80 id=__codelineno-5-80 name=__codelineno-5-80></a>        AE 17 F7 EB 5B 82 E4 A1 DD 6F C7 86 B9 DB 22 17
</span><span id=__span-5-81><a href=#__codelineno-5-81 id=__codelineno-5-81 name=__codelineno-5-81></a>        7A 8F BE 67 05 EB 68 E2 68 5F 8A CC 05 93 9D 36
</span><span id=__span-5-82><a href=#__codelineno-5-82 id=__codelineno-5-82 name=__codelineno-5-82></a>        25 11 1B DA E9 9E 63 55 5D FE 71 3A B9 BC 32 37
</span><span id=__span-5-83><a href=#__codelineno-5-83 id=__codelineno-5-83 name=__codelineno-5-83></a>        99 69 97 3C C4 DA CA 45 73 8C 11 F0 B5 EC EC 91
</span><span id=__span-5-84><a href=#__codelineno-5-84 id=__codelineno-5-84 name=__codelineno-5-84></a>coefficient(QInv):
</span><span id=__span-5-85><a href=#__codelineno-5-85 id=__codelineno-5-85 name=__codelineno-5-85></a>        62 4F E3 8A 73 BD 03 DC 17 DD 17 87 DB 1C EA 88
</span><span id=__span-5-86><a href=#__codelineno-5-86 id=__codelineno-5-86 name=__codelineno-5-86></a>        5E C2 F7 7D 3F 1F 47 52 B2 F5 43 92 A8 D0 9D D0
</span><span id=__span-5-87><a href=#__codelineno-5-87 id=__codelineno-5-87 name=__codelineno-5-87></a>        3E 7E 98 A3 B1 DC 84 90 01 B1 16 D6 0D 05 77 03
</span><span id=__span-5-88><a href=#__codelineno-5-88 id=__codelineno-5-88 name=__codelineno-5-88></a>        EA 0D 10 68 DC 74 D7 82 90 05 7C 80 26 8D C3 2D
</span><span id=__span-5-89><a href=#__codelineno-5-89 id=__codelineno-5-89 name=__codelineno-5-89></a>        7D 96 65 4C 29 6B 1A A2 F7 59 24 40 58 12 77 19
</span><span id=__span-5-90><a href=#__codelineno-5-90 id=__codelineno-5-90 name=__codelineno-5-90></a>        6C 37 FD 94 23 A9 C4 D3 82 67 F4 13 33 09 29 B0
</span><span id=__span-5-91><a href=#__codelineno-5-91 id=__codelineno-5-91 name=__codelineno-5-91></a>        88 D2 80 CC A5 3F C5 E7 53 A6 EA 87 26 0A 42 0E
</span><span id=__span-5-92><a href=#__codelineno-5-92 id=__codelineno-5-92 name=__codelineno-5-92></a>        35 97 07 88 66 4C BA 1A B1 08 92 97 49 74 3C D0
</span><span id=__span-5-93><a href=#__codelineno-5-93 id=__codelineno-5-93 name=__codelineno-5-93></a>
</span><span id=__span-5-94><a href=#__codelineno-5-94 id=__codelineno-5-94 name=__codelineno-5-94></a>
</span><span id=__span-5-95><a href=#__codelineno-5-95 id=__codelineno-5-95 name=__codelineno-5-95></a>*=*=* X509 *=*=*
</span><span id=__span-5-96><a href=#__codelineno-5-96 id=__codelineno-5-96 name=__codelineno-5-96></a>        Subject &lt;*.winc.atmel.com&gt;
</span><span id=__span-5-97><a href=#__codelineno-5-97 id=__codelineno-5-97 name=__codelineno-5-97></a>        Issuer  &lt;WINCRootCA&gt;
</span><span id=__span-5-98><a href=#__codelineno-5-98 id=__codelineno-5-98 name=__codelineno-5-98></a>        &lt;2016-06-12 12:29:03&gt; to &lt;2021-12-03 12:29:03&gt;
</span></code></pre></div></atmeleccca></p> <hr> <h3 id=dumping-tls-certificates>Dumping TLS Certificates<a class=headerlink href=#dumping-tls-certificates title="Permanent link">¶</a></h3> <p>Unfortunately, the tool only dumps the certificates and not the private key.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a># Extract TLS Certificate(s)
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a>tls_cert_flash_tool.exe read -fwimg atwinc1500-adafruit.bin -ecdsa -rsa -all -out output
</span><span id=__span-6-3><a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a>
</span><span id=__span-6-4><a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a>******************************************
</span><span id=__span-6-5><a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a>*   WINC1500 TLS Certificate Flash Tool  *
</span><span id=__span-6-6><a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a>******************************************
</span><span id=__span-6-7><a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a>Press any key to continue . . .
</span><span id=__span-6-8><a href=#__codelineno-6-8 id=__codelineno-6-8 name=__codelineno-6-8></a>
</span><span id=__span-6-9><a href=#__codelineno-6-9 id=__codelineno-6-9 name=__codelineno-6-9></a>$ ls output
</span><span id=__span-6-10><a href=#__codelineno-6-10 id=__codelineno-6-10 name=__codelineno-6-10></a>AtmelEccCA.cer  ECDSA_winc.atmel.com.cer  RSA_winc.atmel.com.cer  WINCRootCA.cer
</span></code></pre></div> <hr> <h2 id=firmware-versions>Firmware Versions<a class=headerlink href=#firmware-versions title="Permanent link">¶</a></h2> <p>Before we wrap, let's talk about how to upgrade the firmware on our ATWINC1500 module.</p> <p>As vulnerabilities are found and patched, Microchip, and integrators will roll out firmware updates, I believe the latest firmware (as of March 22, 2023) is <code>19.7.7</code>, available <a href=https://microchip.my.site.com/s/article/How-to-update-the-firmware-of-WINC1500-module>here</a>.</p> <h3 id=checking-firmware-version>Checking Firmware Version<a class=headerlink href=#checking-firmware-version title="Permanent link">¶</a></h3> <p>The easiest way I've found to check the ATWINC1500 firmware version is to use the Arduino <code>CheckWifi101FirmwareVersion</code> sketch:</p> <p>![<a href=index.html#tls-server-store width=500>Pasted image 20230321160515.png</a></p> <p>After uploading the sketch to your board it spits out the firmware version:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321160237.png><img alt="Pasted image 20230321160237.png" src=../../../assets/images/pasted-image-20230321160237.png width=500></a></p> <hr> <h3 id=updating-firmware>Updating Firmware<a class=headerlink href=#updating-firmware title="Permanent link">¶</a></h3> <p>The easiest way I've found to upgrade the ATWINC1500 firmware is to use the Arduino "WiFi101 / WiFiNINA Firmware Updater" tool, built right into the Arduino IDE:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230322235656.png><img alt="Pasted image 20230322235656.png" src=../../../assets/images/pasted-image-20230322235656.png></a></p> <h4 id=write-firmwareupdater-sketch>Write FirmwareUpdater Sketch<a class=headerlink href=#write-firmwareupdater-sketch title="Permanent link">¶</a></h4> <p>To use the updater, you'll need to first upload the <code>FirmwareUpdater</code> sketch</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321160606.png><img alt="Pasted image 20230321160606.png" src=../../../assets/images/pasted-image-20230321160606.png width=500></a></p> <h4 id=update-firmware>Update Firmware<a class=headerlink href=#update-firmware title="Permanent link">¶</a></h4> <p>Once the <code>FirmwareUpdater</code> sketch has been uploaded, you can select the board and desired firmware version and click 'Update Firmware':</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321160737.png><img alt="Pasted image 20230321160737.png" src=../../../assets/images/pasted-image-20230321160737.png width=400></a></p> <p>Resulting in:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321160714.png><img alt="Pasted image 20230321160714.png" src=../../../assets/images/pasted-image-20230321160714.png></a></p> <p>Subsequently, running the <code>CheckWifi101FirmwareVersion</code> sketch should result in:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321160857.png><img alt="Pasted image 20230321160857.png" src=../../../assets/images/pasted-image-20230321160857.png width=500></a></p> <h4 id=further-reading>Further Reading<a class=headerlink href=#further-reading title="Permanent link">¶</a></h4> <ul> <li><a href=https://learn.adafruit.com/adafruit-feather-m0-wifi-atwinc1500/updating-firmware>Adafruit Feather M0 Firmware Update Guide</a></li> <li><a href=http://www.bectronics.com/winc1500-firmware-upgrade/ >Debug UART Firmware Upgrade Example</a></li> </ul> <hr> <h2 id=uploading-ssl-root-certificates>Uploading SSL Root Certificates<a class=headerlink href=#uploading-ssl-root-certificates title="Permanent link">¶</a></h2> <p>If you're in a hurry, the Arduino "WiFi101 / WiFiNINA Firmware Updater" also provides a convenient way to add certificates to the Root Cert Store.</p> <p>For example, to add the root cert for <code>www.google.com</code>:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321161002.png><img alt="Pasted image 20230321161002.png" src=../../../assets/images/pasted-image-20230321161002.png></a></p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321161125.png><img alt="Pasted image 20230321161125.png" src=../../../assets/images/pasted-image-20230321161125.png width=500></a></p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=../../../assets/images/pasted-image-20230321161250.png><img alt="Pasted image 20230321161250.png" src=../../../assets/images/pasted-image-20230321161250.png></a></p> <hr> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">¶</a></h2> <p>Unfortunately, <code>tls_cert_flash_tool.exe</code> is the only tool Microchip provides for extracting information from a firmware binary.</p> <p>To probe further we're going to have to put on our big boy pants and go down an ADHD hyperfocus rabbit hole.</p> <p>Follow along in <a href=../atwinc1500-iot-module-deep-dive-part-2/index.html>ATWINC1500 IoT Module Deep-Dive (Part 2)</a>. <br></p> <div class=blogging-tags-grid> <a class=blogging-tag href=https://samrambles.com/tags#microchip><code>#microchip</code></a> <a class=blogging-tag href=https://samrambles.com/tags#firmware><code>#firmware</code></a> <a class=blogging-tag href=https://samrambles.com/tags#binary-analysis><code>#binary-analysis</code></a> <a class=blogging-tag href=https://samrambles.com/tags#iot><code>#iot</code></a> </div> <style>
    .md-typeset .blogging-tags-grid {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 5px;
    }

    .md-typeset .blogging-tag {
        color: var(--md-typeset-color);
        background-color: var(--md-typeset-code-color);
    }

    .md-typeset .blogging-tag code {
        border-radius: 5px;
    }
</style></div> <hr> <div class=md-source-file> <small> Last update: 2023-03-26 </small> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Made with ❤️ by Sam. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/peddamat rel=noopener target=_blank title=github.com> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/peddamat rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> <a class=md-social__link href=https://www.instagram.com/speddamat rel=noopener target=_blank title=www.instagram.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["announce.dismiss", "header.autohide", "search.share", "search.highlight", "search.suggest", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "navigation.tracking", "navigation.top", "navigation.sections", "navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.2a6f1dda.min.js></script> <script src=../../../assests/scripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "none", "closeEffect": "none", "slideEffect": "none"});})</script></body> </html>