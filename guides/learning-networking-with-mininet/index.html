<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Mininet is an open-source network emulator that allows users to create virtual networks with a variety of topologies, protocols, and applications. What's awesome is that it allows you to easily test, prototype, and experiment with different networking concepts and architectures..." name=description><meta content="Sumanth " name=author peddamatham&quot; sam&quot;><link href=https://samrambles.com/guides/learning-networking-with-mininet/index.html rel=canonical><link href=../index.html rel=prev><link href=../writing-home-assistant-integrations/index.html rel=next><link href=../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.15" name=generator><title>Learning Networking With Mininet - Sam Rambles</title><link href=../../assets/stylesheets/main.113286f1.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.a0c5b2b5.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CIMB+Plex+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Noto Sans";--md-code-font:"IMB Plex Mono"}</style><link href=../../assets/stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-RZQGZXT3GC"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RZQGZXT3GC');
</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=black data-md-color-primary=black data-md-color-scheme=slate dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#further-reading> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> <em><b>Migration in progress:</b> apologies for broken articles and links.</em> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Sam Rambles" class="md-header__button md-logo" data-md-component=logo href=../../index.html title="Sam Rambles"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Sam Rambles </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Learning Networking With Mininet </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=black data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=black data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg> </label> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=white data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=white data-md-color-scheme=white id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <a aria-label=Share class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=Share> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg> </a> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/peddamat/mkdocs-obsidian title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> peddamat/mkdocs-obsidian </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../index.html> Home </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../tags/index.html> Tags </a> </li> <li class=md-tabs__item> <a class="md-tabs__link md-tabs__link--active" href=../index.html> Guides </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../musings/my-favorite-technical-articles/index.html> Musings </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../notes/index.html> Notes </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../projects/index.html> Projects </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Sam Rambles" class="md-nav__button md-logo" data-md-component=logo href=../../index.html title="Sam Rambles"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> Sam Rambles </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/peddamat/mkdocs-obsidian title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> peddamat/mkdocs-obsidian </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../index.html> Home </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../tags/index.html> Tags </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../index.html>Guides</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> Learning Networking With Mininet <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href=index.html> Learning Networking With Mininet </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#further-reading> Further Reading </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#creating-custom-topologies> Creating Custom Topologies </a> <nav aria-label="Creating Custom Topologies" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#configuring-network-protocols-and-applications> Configuring Network Protocols and Applications </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-mininet-with-sdn-controllers> Using Mininet with SDN Controllers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#testing-multicast> Testing Multicast </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#vlan-tagging-switch-port> VLAN Tagging Switch Port </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#adding-default-route> Adding Default Route </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#introducing-vyos> Introducing Vyos </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#graveyard> Graveyard </a> <nav aria-label=Graveyard class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#building-iso> Building ISO </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-docker> Using Docker </a> <nav aria-label="Using Docker" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#create-network> Create Network </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#check-networks> Check Networks </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#start-vyos-container> Start Vyos Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#start-mininet-container> Start MiniNet Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#references> References </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#troubleshooting> Troubleshooting </a> <nav aria-label=Troubleshooting class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#finding-pid-of-container> Finding pid of Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#entering-vyos-container> Entering vyos Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#get-a-vyos-shell-where-show-works> Get a vyos Shell Where show works </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=../writing-home-assistant-integrations/index.html> Writing Home Assistant Integrations </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../writing-lightroom-classic-plugins/index.html> Writing Lightroom Classic Plugins </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_5 type=checkbox> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> Dotfiles <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Dotfiles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../dotfiles/how-i-overengineered-my-home-network/index.html> How I Overengineered My Home Network </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../dotfiles/how-i-setup-this-blog/index.html> How I Setup This Blog </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../dotfiles/how-i-write-mkdocs-plugins/index.html> How I Write MkDocs Plugins </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../dotfiles/how-to-quickly-setup-a-wireless-mitm-proxy/index.html> How To Quickly Setup A Wireless MitM Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_6 type=checkbox> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> FancyZones <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> FancyZones </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../fancyzones/how-fancyzones-works/index.html> How FancyZones Works </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../fancyzones/how-to-hack-fancyzones/index.html> How To Hack FancyZones </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_7 type=checkbox> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> Home DIY <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Home DIY </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../home-diy/how-to-size-a-solar-battery-install/index.html> How To Size A Solar Battery Install </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_8 type=checkbox> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> Window Hacking With Rust <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_8_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Window Hacking With Rust </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../window-hacking-with-rust/creating-a-dll-with-rust/index.html> Creating A DLL With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../window-hacking-with-rust/creating-a-window-with-rust/index.html> Creating A Window With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../window-hacking-with-rust/injecting-dlls-with-rust/index.html> Injecting DLLs With Rust </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../window-hacking-with-rust/production-ready-dll-injection/index.html> Production Ready DLL Injection </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Musings <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Musings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../musings/my-favorite-technical-articles/index.html> My Favorite Technical Articles </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../notes/index.html>Notes</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/debugging-tools/index.html> Debugging Tools </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/reverse-engineering-tools/index.html> Reverse Engineering Tools </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_4 type=checkbox> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> Cheatsheets <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Cheatsheets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/docker-cheatsheet/index.html> Docker Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/git-cheatsheet/index.html> Git Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/python-cheatsheet/index.html> Python Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/rsync-cheatsheet/index.html> Rsync Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/ruby-cheatsheet/index.html> Ruby Cheatsheet </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/cheatsheets/tls-cheatsheet/index.html> TLS Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_5 type=checkbox> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> Debug Probes <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Debug Probes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/debug-probes/black-magic-probe/index.html> Black Magic Probe </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/debug-probes/segger-j-link/index.html> Segger J-Link </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6 type=checkbox> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> Development Kits <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Development Kits </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/adafruit-feather-m0-wifi/index.html> Adafruit Feather M0 WiFi </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/esp32/index.html> ESP32 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/raspberry-pi/index.html> Raspberry Pi </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6_4 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../notes/development-kits/esp8266/index.html>ESP8266</a> <label for=__nav_5_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_6_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_6_4> <span class="md-nav__icon md-icon"></span> ESP8266 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/esp8266/esp-01/index.html> ESP-01 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/esp8266/wemos-mini/index.html> Wemos Mini </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_6_5 type=checkbox> <label class=md-nav__link for=__nav_5_6_5 id=__nav_5_6_5_label tabindex=0> STM32 <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_6_5_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_5_6_5> <span class="md-nav__icon md-icon"></span> STM32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/stm32/black-pill/index.html> Black Pill </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/stm32/itead-maple/index.html> ITead Maple </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../notes/development-kits/stm32/super-blue-pill/index.html> Super Blue Pill </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../projects/index.html>Projects</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_6_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_2 type=checkbox> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> Apps <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../projects/apps/introducing-recon/index.html> Introducing Recon </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/apps/introducing-sensie/index.html> Introducing Sensie </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/apps/serialmoose-serial-port-sniffer/index.html> SerialMoose Serial Port Sniffer </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_2_4 type=checkbox> <label class=md-nav__link for=__nav_6_2_4 id=__nav_6_2_4_label tabindex=0> CalibreSync <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_2_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_6_2_4> <span class="md-nav__icon md-icon"></span> CalibreSync </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../projects/apps/calibresync/calibresync-development-notes/index.html> CalibreSync Development Notes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_3 type=checkbox> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> Cancer Research <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Cancer Research </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../projects/cancer-research/generating-complete-genomics-build37-files/index.html> Generating Complete Genomics build37 Files </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/cancer-research/target-aml-data-analysis/index.html> TARGET AML Data Analysis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_4 type=checkbox> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> Home Assistant <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> Home Assistant </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../projects/home-assistant/my-smart-home-devices/index.html> My Smart Home Devices </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/home-assistant/samsung-refrigerator-integration/index.html> Samsung Refrigerator Integration </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/home-assistant/using-pyscript-in-jupyterlab/index.html> Using Pyscript In JupyterLab </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6_5 type=checkbox> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> Hunter Hacking <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_6_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Hunter Hacking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/a-look-inside-a-hunter-pro-hc-controller/index.html> A Look Inside A Hunter Pro-HC Controller </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/atwinc1500-iot-module-deep-dive-part-1/index.html> ATWINC1500 IoT Module Deep-Dive (Part 1) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/atwinc1500-iot-module-deep-dive-part-2/index.html> ATWINC1500 IoT Module Deep-Dive (Part 2) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/hands-on-iot-mitm-part-1/index.html> Hands On IoT MitM (Part 1) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/hands-on-iot-mitm-part-2/index.html> Hands On IoT MitM (Part 2) </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../projects/hunter-hacking/reverse-engineering-a-hunter-pro-hc-controller/index.html> Reverse Engineering A Hunter Pro HC Controller </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#further-reading> Further Reading </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#creating-custom-topologies> Creating Custom Topologies </a> <nav aria-label="Creating Custom Topologies" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#configuring-network-protocols-and-applications> Configuring Network Protocols and Applications </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-mininet-with-sdn-controllers> Using Mininet with SDN Controllers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#testing-multicast> Testing Multicast </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#vlan-tagging-switch-port> VLAN Tagging Switch Port </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#adding-default-route> Adding Default Route </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#introducing-vyos> Introducing Vyos </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#graveyard> Graveyard </a> <nav aria-label=Graveyard class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#building-iso> Building ISO </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-docker> Using Docker </a> <nav aria-label="Using Docker" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#create-network> Create Network </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#check-networks> Check Networks </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#start-vyos-container> Start Vyos Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#start-mininet-container> Start MiniNet Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#references> References </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#troubleshooting> Troubleshooting </a> <nav aria-label=Troubleshooting class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#finding-pid-of-container> Finding pid of Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#entering-vyos-container> Entering vyos Container </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#get-a-vyos-shell-where-show-works> Get a vyos Shell Where show works </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a class=md-tag href=../../tags/index.html#networking>networking</a> <a class=md-tag href=../../tags/index.html#docker>docker</a> <a class=md-tag href=../../tags/index.html#mininet>mininet</a> </nav> <h1>Learning Networking With Mininet</h1> <div><p><em>This article is a work in progress</em></p> <p>Mininet Mininet is an open-source network emulator that allows users to create virtual networks with a variety of topologies, protocols, and applications. It is widely used by network researchers, developers, and educators to test, prototype, and experiment with different networking concepts and architectures.</p> <p>To get started with Mininet, you need to have a Linux-based operating system installed on your machine. You can either install Mininet directly on your machine or use a pre-built virtual machine image that comes with Mininet pre-installed. Once you have Mininet up and running, you can use its Python API to create, configure, and interact with virtual networks.</p> <h2 id=further-reading>Further Reading<a class=headerlink href=#further-reading title="Permanent link">¶</a></h2> <ul> <li><a href=https://github.com/mininet/mininet/wiki/Introduction-to-Mininet>Introduction to Mininet</a></li> </ul> <hr> <h2 id=creating-custom-topologies>Creating Custom Topologies<a class=headerlink href=#creating-custom-topologies title="Permanent link">¶</a></h2> <p>One of the key features of Mininet is its ability to create custom network topologies. You can use Mininet's topology API to define your own network topology, which can include switches, hosts, links, and controllers. For example, you can create a tree topology with a single root switch and multiple child switches, or a mesh topology with multiple switches interconnected in a fully-connected mesh.</p> <p>To create a custom topology, you need to write a Python script that uses Mininet's topology API to define the network topology. You can then use the <code>mn</code> command to launch the virtual network and interact with it. For example, the following script creates a tree topology with a single root switch and two levels of child switches and hosts:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=kn>from</span> <span class=nn>mininet.topo</span> <span class=kn>import</span> <span class=n>Topo</span>
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a><span class=kn>from</span> <span class=nn>mininet.net</span> <span class=kn>import</span> <span class=n>Mininet</span>
</span><span id=__span-0-3><a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a><span class=kn>from</span> <span class=nn>mininet.node</span> <span class=kn>import</span> <span class=n>RemoteController</span>
</span><span id=__span-0-4><a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a>
</span><span id=__span-0-5><a href=#__codelineno-0-5 id=__codelineno-0-5 name=__codelineno-0-5></a><span class=k>class</span> <span class=nc>MyTopo</span><span class=p>(</span><span class=n>Topo</span><span class=p>):</span>
</span><span id=__span-0-6><a href=#__codelineno-0-6 id=__codelineno-0-6 name=__codelineno-0-6></a>    <span class=k>def</span> <span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-7><a href=#__codelineno-0-7 id=__codelineno-0-7 name=__codelineno-0-7></a>        <span class=n>s1</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s1'</span><span class=p>)</span>
</span><span id=__span-0-8><a href=#__codelineno-0-8 id=__codelineno-0-8 name=__codelineno-0-8></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
</span><span id=__span-0-9><a href=#__codelineno-0-9 id=__codelineno-0-9 name=__codelineno-0-9></a>            <span class=n>s2</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s</span><span class=si>%s</span><span class=s1>'</span> <span class=o>%</span> <span class=p>(</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>))</span>
</span><span id=__span-0-10><a href=#__codelineno-0-10 id=__codelineno-0-10 name=__codelineno-0-10></a>            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
</span><span id=__span-0-11><a href=#__codelineno-0-11 id=__codelineno-0-11 name=__codelineno-0-11></a>                <span class=n>h</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h</span><span class=si>%s</span><span class=s1>'</span> <span class=o>%</span> <span class=p>(</span><span class=n>i</span><span class=o>*</span><span class=n>j</span><span class=p>))</span>
</span><span id=__span-0-12><a href=#__codelineno-0-12 id=__codelineno-0-12 name=__codelineno-0-12></a>                <span class=bp>self</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>h</span><span class=p>,</span> <span class=n>s2</span><span class=p>)</span>
</span><span id=__span-0-13><a href=#__codelineno-0-13 id=__codelineno-0-13 name=__codelineno-0-13></a>            <span class=bp>self</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span> <span class=n>s2</span><span class=p>)</span>
</span><span id=__span-0-14><a href=#__codelineno-0-14 id=__codelineno-0-14 name=__codelineno-0-14></a>
</span><span id=__span-0-15><a href=#__codelineno-0-15 id=__codelineno-0-15 name=__codelineno-0-15></a><span class=n>topo</span> <span class=o>=</span> <span class=n>MyTopo</span><span class=p>()</span>
</span><span id=__span-0-16><a href=#__codelineno-0-16 id=__codelineno-0-16 name=__codelineno-0-16></a><span class=n>net</span> <span class=o>=</span> <span class=n>Mininet</span><span class=p>(</span><span class=n>topo</span><span class=o>=</span><span class=n>topo</span><span class=p>,</span> <span class=n>controller</span><span class=o>=</span><span class=n>RemoteController</span><span class=p>)</span>
</span><span id=__span-0-17><a href=#__codelineno-0-17 id=__codelineno-0-17 name=__codelineno-0-17></a><span class=n>net</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span><span id=__span-0-18><a href=#__codelineno-0-18 id=__codelineno-0-18 name=__codelineno-0-18></a><span class=n>net</span><span class=o>.</span><span class=n>pingAll</span><span class=p>()</span>
</span><span id=__span-0-19><a href=#__codelineno-0-19 id=__codelineno-0-19 name=__codelineno-0-19></a><span class=n>net</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></code></pre></div> <p>This script defines a custom topology with a single root switch <code>s1</code> and two levels of child switches <code>s2</code> and hosts <code>h1</code> to <code>h4</code>. It also adds links between hosts and child switches, and between child switches and the root switch. Finally, it starts the virtual network, pings all hosts to test connectivity, and stops the network.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=kn>from</span> <span class=nn>mininet.net</span> <span class=kn>import</span> <span class=n>Mininet</span>
</span><span id=__span-1-2><a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=kn>from</span> <span class=nn>mininet.node</span> <span class=kn>import</span> <span class=n>Controller</span><span class=p>,</span> <span class=n>OVSSwitch</span>
</span><span id=__span-1-3><a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=kn>from</span> <span class=nn>mininet.cli</span> <span class=kn>import</span> <span class=n>CLI</span>
</span><span id=__span-1-4><a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a>
</span><span id=__span-1-5><a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=c1># Create a Mininet instance</span>
</span><span id=__span-1-6><a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a><span class=n>net</span> <span class=o>=</span> <span class=n>Mininet</span><span class=p>(</span><span class=n>controller</span><span class=o>=</span><span class=n>Controller</span><span class=p>,</span> <span class=n>switch</span><span class=o>=</span><span class=n>OVSSwitch</span><span class=p>)</span>
</span><span id=__span-1-7><a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a>
</span><span id=__span-1-8><a href=#__codelineno-1-8 id=__codelineno-1-8 name=__codelineno-1-8></a><span class=c1># Add hosts</span>
</span><span id=__span-1-9><a href=#__codelineno-1-9 id=__codelineno-1-9 name=__codelineno-1-9></a><span class=n>h1</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h1'</span><span class=p>)</span>
</span><span id=__span-1-10><a href=#__codelineno-1-10 id=__codelineno-1-10 name=__codelineno-1-10></a><span class=n>h2</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h2'</span><span class=p>)</span>
</span><span id=__span-1-11><a href=#__codelineno-1-11 id=__codelineno-1-11 name=__codelineno-1-11></a><span class=n>h3</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h3'</span><span class=p>)</span>
</span><span id=__span-1-12><a href=#__codelineno-1-12 id=__codelineno-1-12 name=__codelineno-1-12></a>
</span><span id=__span-1-13><a href=#__codelineno-1-13 id=__codelineno-1-13 name=__codelineno-1-13></a><span class=c1># Add switches</span>
</span><span id=__span-1-14><a href=#__codelineno-1-14 id=__codelineno-1-14 name=__codelineno-1-14></a><span class=n>s1</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s1'</span><span class=p>)</span>
</span><span id=__span-1-15><a href=#__codelineno-1-15 id=__codelineno-1-15 name=__codelineno-1-15></a><span class=n>s2</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s2'</span><span class=p>)</span>
</span><span id=__span-1-16><a href=#__codelineno-1-16 id=__codelineno-1-16 name=__codelineno-1-16></a>
</span><span id=__span-1-17><a href=#__codelineno-1-17 id=__codelineno-1-17 name=__codelineno-1-17></a><span class=c1># Add links</span>
</span><span id=__span-1-18><a href=#__codelineno-1-18 id=__codelineno-1-18 name=__codelineno-1-18></a><span class=n>net</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>h1</span><span class=p>,</span> <span class=n>s1</span><span class=p>)</span>
</span><span id=__span-1-19><a href=#__codelineno-1-19 id=__codelineno-1-19 name=__codelineno-1-19></a><span class=n>net</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>h2</span><span class=p>,</span> <span class=n>s1</span><span class=p>)</span>
</span><span id=__span-1-20><a href=#__codelineno-1-20 id=__codelineno-1-20 name=__codelineno-1-20></a><span class=n>net</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span> <span class=n>s2</span><span class=p>)</span>
</span><span id=__span-1-21><a href=#__codelineno-1-21 id=__codelineno-1-21 name=__codelineno-1-21></a><span class=n>net</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>s2</span><span class=p>,</span> <span class=n>h3</span><span class=p>)</span>
</span><span id=__span-1-22><a href=#__codelineno-1-22 id=__codelineno-1-22 name=__codelineno-1-22></a>
</span><span id=__span-1-23><a href=#__codelineno-1-23 id=__codelineno-1-23 name=__codelineno-1-23></a><span class=c1># Start the network</span>
</span><span id=__span-1-24><a href=#__codelineno-1-24 id=__codelineno-1-24 name=__codelineno-1-24></a><span class=n>net</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span><span id=__span-1-25><a href=#__codelineno-1-25 id=__codelineno-1-25 name=__codelineno-1-25></a>
</span><span id=__span-1-26><a href=#__codelineno-1-26 id=__codelineno-1-26 name=__codelineno-1-26></a><span class=c1># Test connectivity</span>
</span><span id=__span-1-27><a href=#__codelineno-1-27 id=__codelineno-1-27 name=__codelineno-1-27></a><span class=nb>print</span><span class=p>(</span><span class=s1>'Testing connectivity...'</span><span class=p>)</span>
</span><span id=__span-1-28><a href=#__codelineno-1-28 id=__codelineno-1-28 name=__codelineno-1-28></a><span class=n>net</span><span class=o>.</span><span class=n>pingAll</span><span class=p>()</span>
</span><span id=__span-1-29><a href=#__codelineno-1-29 id=__codelineno-1-29 name=__codelineno-1-29></a>
</span><span id=__span-1-30><a href=#__codelineno-1-30 id=__codelineno-1-30 name=__codelineno-1-30></a><span class=c1># Launch the Mininet CLI</span>
</span><span id=__span-1-31><a href=#__codelineno-1-31 id=__codelineno-1-31 name=__codelineno-1-31></a><span class=n>CLI</span><span class=p>(</span><span class=n>net</span><span class=p>)</span>
</span><span id=__span-1-32><a href=#__codelineno-1-32 id=__codelineno-1-32 name=__codelineno-1-32></a>
</span><span id=__span-1-33><a href=#__codelineno-1-33 id=__codelineno-1-33 name=__codelineno-1-33></a><span class=c1># Stop the network</span>
</span><span id=__span-1-34><a href=#__codelineno-1-34 id=__codelineno-1-34 name=__codelineno-1-34></a><span class=n>net</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></code></pre></div> <hr> <h3 id=configuring-network-protocols-and-applications>Configuring Network Protocols and Applications<a class=headerlink href=#configuring-network-protocols-and-applications title="Permanent link">¶</a></h3> <p>Another key feature of Mininet is its ability to configure and test various network protocols and applications. You can use Mininet to simulate different types of traffic, such as TCP, UDP, and ICMP, and test their performance under various network conditions, such as bandwidth, delay, and loss.</p> <p>To configure network protocols and applications, you can use Mininet's CLI (command-line interface) to set various parameters and options. For example, you can use the <code>tc</code> command to configure the traffic control (TC) module, which allows you to simulate various network conditions. You can also use the <code>iperf</code> command to test the network throughput and latency, or the <code>ping</code> command to test the network connectivity and latency.</p> <p>For example, the following script creates a custom topology with a single root switch and two hosts, and configures the network to simulate a delay of 100ms and a loss rate of 10%:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=kn>from</span> <span class=nn>mininet.net</span> <span class=kn>import</span> <span class=n>Mininet</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=kn>from</span> <span class=nn>mininet.topo</span> <span class=kn>import</span> <span class=n>Topo</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=kn>from</span> <span class=nn>mininet.link</span> <span class=kn>import</span> <span class=n>TCLink</span>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=kn>from</span> <span class=nn>mininet.util</span> <span class=kn>import</span> <span class=n>dumpNodeConnections</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=k>class</span> <span class=nc>CustomTopo</span><span class=p>(</span><span class=n>Topo</span><span class=p>):</span>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a>    <span class=k>def</span> <span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a>        <span class=c1># Add hosts</span>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a>        <span class=n>h1</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h1'</span><span class=p>)</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a>        <span class=n>h2</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h2'</span><span class=p>)</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a>
</span><span id=__span-2-12><a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a>        <span class=c1># Add switch</span>
</span><span id=__span-2-13><a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a>        <span class=n>s1</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s1'</span><span class=p>)</span>
</span><span id=__span-2-14><a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a>
</span><span id=__span-2-15><a href=#__codelineno-2-15 id=__codelineno-2-15 name=__codelineno-2-15></a>        <span class=c1># Add links with delay and loss rate</span>
</span><span id=__span-2-16><a href=#__codelineno-2-16 id=__codelineno-2-16 name=__codelineno-2-16></a>        <span class=bp>self</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>h1</span><span class=p>,</span> <span class=n>s1</span><span class=p>,</span> <span class=bp>cls</span><span class=o>=</span><span class=n>TCLink</span><span class=p>,</span> <span class=n>delay</span><span class=o>=</span><span class=s1>'100ms'</span><span class=p>,</span> <span class=n>loss</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span><span id=__span-2-17><a href=#__codelineno-2-17 id=__codelineno-2-17 name=__codelineno-2-17></a>        <span class=bp>self</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>h2</span><span class=p>,</span> <span class=n>s1</span><span class=p>,</span> <span class=bp>cls</span><span class=o>=</span><span class=n>TCLink</span><span class=p>,</span> <span class=n>delay</span><span class=o>=</span><span class=s1>'100ms'</span><span class=p>,</span> <span class=n>loss</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span><span id=__span-2-18><a href=#__codelineno-2-18 id=__codelineno-2-18 name=__codelineno-2-18></a>
</span><span id=__span-2-19><a href=#__codelineno-2-19 id=__codelineno-2-19 name=__codelineno-2-19></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>'__main__'</span><span class=p>:</span>
</span><span id=__span-2-20><a href=#__codelineno-2-20 id=__codelineno-2-20 name=__codelineno-2-20></a>    <span class=n>topo</span> <span class=o>=</span> <span class=n>CustomTopo</span><span class=p>()</span>
</span><span id=__span-2-21><a href=#__codelineno-2-21 id=__codelineno-2-21 name=__codelineno-2-21></a>    <span class=n>net</span> <span class=o>=</span> <span class=n>Mininet</span><span class=p>(</span><span class=n>topo</span><span class=o>=</span><span class=n>topo</span><span class=p>,</span> <span class=n>link</span><span class=o>=</span><span class=n>TCLink</span><span class=p>)</span>
</span><span id=__span-2-22><a href=#__codelineno-2-22 id=__codelineno-2-22 name=__codelineno-2-22></a>
</span><span id=__span-2-23><a href=#__codelineno-2-23 id=__codelineno-2-23 name=__codelineno-2-23></a>    <span class=c1># Start the network</span>
</span><span id=__span-2-24><a href=#__codelineno-2-24 id=__codelineno-2-24 name=__codelineno-2-24></a>    <span class=n>net</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span><span id=__span-2-25><a href=#__codelineno-2-25 id=__codelineno-2-25 name=__codelineno-2-25></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>'Dumping host connections:'</span><span class=p>)</span>
</span><span id=__span-2-26><a href=#__codelineno-2-26 id=__codelineno-2-26 name=__codelineno-2-26></a>    <span class=n>dumpNodeConnections</span><span class=p>(</span><span class=n>net</span><span class=o>.</span><span class=n>hosts</span><span class=p>)</span>
</span><span id=__span-2-27><a href=#__codelineno-2-27 id=__codelineno-2-27 name=__codelineno-2-27></a>
</span><span id=__span-2-28><a href=#__codelineno-2-28 id=__codelineno-2-28 name=__codelineno-2-28></a>    <span class=c1># Test connectivity</span>
</span><span id=__span-2-29><a href=#__codelineno-2-29 id=__codelineno-2-29 name=__codelineno-2-29></a>    <span class=nb>print</span><span class=p>(</span><span class=s1>'Testing connectivity...'</span><span class=p>)</span>
</span><span id=__span-2-30><a href=#__codelineno-2-30 id=__codelineno-2-30 name=__codelineno-2-30></a>    <span class=n>net</span><span class=o>.</span><span class=n>pingAll</span><span class=p>()</span>
</span><span id=__span-2-31><a href=#__codelineno-2-31 id=__codelineno-2-31 name=__codelineno-2-31></a>
</span><span id=__span-2-32><a href=#__codelineno-2-32 id=__codelineno-2-32 name=__codelineno-2-32></a>    <span class=c1># Launch the Mininet CLI</span>
</span><span id=__span-2-33><a href=#__codelineno-2-33 id=__codelineno-2-33 name=__codelineno-2-33></a>    <span class=n>net</span><span class=o>.</span><span class=n>interact</span><span class=p>()</span>
</span><span id=__span-2-34><a href=#__codelineno-2-34 id=__codelineno-2-34 name=__codelineno-2-34></a>
</span><span id=__span-2-35><a href=#__codelineno-2-35 id=__codelineno-2-35 name=__codelineno-2-35></a>    <span class=c1># Stop the network</span>
</span><span id=__span-2-36><a href=#__codelineno-2-36 id=__codelineno-2-36 name=__codelineno-2-36></a>    <span class=n>net</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></code></pre></div> <hr> <h3 id=using-mininet-with-sdn-controllers>Using Mininet with SDN Controllers<a class=headerlink href=#using-mininet-with-sdn-controllers title="Permanent link">¶</a></h3> <p>Mininet can be used with various software-defined networking (SDN) controllers, such as OpenDaylight, ONOS, Ryu, and POX. SDN controllers allow you to centralize the control and management of your virtual network, and program the network behavior using various SDN protocols, such as OpenFlow, P4, and NETCONF.</p> <p>To use Mininet with an SDN controller, you need to install and configure the controller first. You can then launch Mininet with the <code>--controller</code> option and specify the IP address and port number of the controller. For example, the following command launches Mininet with the Ryu controller:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>sudo<span class=w> </span>mn<span class=w> </span>--controller<span class=o>=</span>remote,ip<span class=o>=</span><span class=m>127</span>.0.0.1,port<span class=o>=</span><span class=m>6653</span>
</span></code></pre></div> <p>Once you have launched Mininet with the controller, you can use the controller's API to program the network behavior, such as configuring flow rules, collecting statistics, and responding to events. You can also use Mininet's CLI to interact with the network and monitor its behavior in real-time.</p> <hr> <h2 id=testing-multicast>Testing Multicast<a class=headerlink href=#testing-multicast title="Permanent link">¶</a></h2> <p>The <code>sudo mn</code> command launches a new Mininet instance with a default topology that includes a single switch and two hosts. The <code>xterm h1 h2</code> command opens two xterm windows, one for each host, to allow for easy command-line interaction with the hosts.</p> <p>The following commands configure the hosts to enable the reception of broadcast ICMP echo requests, add a route to the multicast network 224.0.0.0/4, and configure the hosts to join the multicast group 224.0.0.2 on their respective Ethernet interfaces. The <code>ip maddr show</code> command is used to display the current multicast group memberships of the hosts.</p> <p>Finally, the <code>h1 ping -I h1-eth0 224.0.0.2</code> command sends an ICMP echo request to the multicast address 224.0.0.2 using the <code>h1-eth0</code> interface. This command is used to test whether the hosts are properly configured to receive and process multicast packets.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a>sudo mn
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>xterm h1 h2
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a>h1 sysctl net.ipv4.icmp_echo_ignore_broadcasts=0
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a>h2 sysctl net.ipv4.icmp_echo_ignore_broadcasts=0
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a>
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>h1 route add -net 224.0.0.0 netmask 240.0.0.0 dev h1-eth0
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a>h2 route add -net 224.0.0.0 netmask 240.0.0.0 dev h2-eth0
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a>h1 ip addr add 224.0.0.2/32 dev h1-eth0 autojoin
</span><span id=__span-4-11><a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>h2 ip addr add 224.0.0.2/32 dev h2-eth0 autojoin
</span><span id=__span-4-12><a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a>
</span><span id=__span-4-13><a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a>h1 ip maddr show
</span><span id=__span-4-14><a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a>h2 ip maddr show
</span><span id=__span-4-15><a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a>
</span><span id=__span-4-16><a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a>h1 ping -I h1-eth0 224.0.0.2
</span></code></pre></div> <h2 id=vlan-tagging-switch-port>VLAN Tagging Switch Port<a class=headerlink href=#vlan-tagging-switch-port title="Permanent link">¶</a></h2> <p>This Mininet example demonstrates how to use the Open vSwitch <code>ovs-vsctl</code> command to configure VLAN tagging and create internal interfaces in a network with two switches, <code>s1</code> and <code>s2</code>.</p> <p>The first two commands set the VLAN tag of port <code>s1-eth1</code> to 80 on switch <code>s1</code>, and set the type of interface <code>s1-eth1</code> to <code>internal</code>. Similarly, the third and fourth commands set the VLAN tag of port <code>s2-eth1</code> to 90 on switch <code>s2</code>, and set the type of interface <code>s2-eth1</code> to <code>internal</code>.</p> <p>The last command sets the VLAN tag of port <code>s2-eth3</code> to 20 on switch <code>s2</code>, and sets the type of interface <code>s2-eth3</code> to <code>internal</code>. This creates a new internal interface that can be used to connect the switch to a virtual machine or container running on the host.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>s1 sudo ovs-vsctl set port s1-eth1 tag=80 -- set interface s1-eth1 type=internal
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a>
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a>s2 sudo ovs-vsctl set port s2-eth1 tag=90 -- set interface s2-eth1 type=internal
</span><span id=__span-5-4><a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a>
</span><span id=__span-5-5><a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a>s2 sudo ovs-vsctl set port s2-eth3 tag=20 -- set interface s2-eth3 type=internal
</span></code></pre></div> <hr> <h2 id=adding-default-route>Adding Default Route<a class=headerlink href=#adding-default-route title="Permanent link">¶</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>h3 ip route add 192.168.1.0/24 dev h3-eth0
</span><span id=__span-6-2><a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a>h3 route add default gw 192.168.1.1 h3-eth0
</span></code></pre></div> <hr> <h2 id=introducing-vyos>Introducing Vyos<a class=headerlink href=#introducing-vyos title="Permanent link">¶</a></h2> <div class="language-yaml highlight"><span class=filename>docker-compose.yml</span><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>'3.7'</span>
</span><span id=__span-7-2><a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a>
</span><span id=__span-7-3><a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-7-4><a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a><span class=w>  </span><span class=nt>mininet</span><span class=p>:</span>
</span><span id=__span-7-5><a href=#__codelineno-7-5 id=__codelineno-7-5 name=__codelineno-7-5></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">iwaseyusuke/mininet</span>
</span><span id=__span-7-6><a href=#__codelineno-7-6 id=__codelineno-7-6 name=__codelineno-7-6></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mininet-instance</span>
</span><span id=__span-7-7><a href=#__codelineno-7-7 id=__codelineno-7-7 name=__codelineno-7-7></a><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-8><a href=#__codelineno-7-8 id=__codelineno-7-8 name=__codelineno-7-8></a><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-7-9><a href=#__codelineno-7-9 id=__codelineno-7-9 name=__codelineno-7-9></a><span class=w>      </span><span class=nt>network1</span><span class=p>:</span>
</span><span id=__span-7-10><a href=#__codelineno-7-10 id=__codelineno-7-10 name=__codelineno-7-10></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.1.10</span>
</span><span id=__span-7-11><a href=#__codelineno-7-11 id=__codelineno-7-11 name=__codelineno-7-11></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:1::10</span>
</span><span id=__span-7-12><a href=#__codelineno-7-12 id=__codelineno-7-12 name=__codelineno-7-12></a><span class=w>      </span><span class=nt>network2</span><span class=p>:</span>
</span><span id=__span-7-13><a href=#__codelineno-7-13 id=__codelineno-7-13 name=__codelineno-7-13></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.2.10</span>
</span><span id=__span-7-14><a href=#__codelineno-7-14 id=__codelineno-7-14 name=__codelineno-7-14></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:2::10</span>
</span><span id=__span-7-15><a href=#__codelineno-7-15 id=__codelineno-7-15 name=__codelineno-7-15></a><span class=w>      </span><span class=nt>network3</span><span class=p>:</span>
</span><span id=__span-7-16><a href=#__codelineno-7-16 id=__codelineno-7-16 name=__codelineno-7-16></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.3.10</span>
</span><span id=__span-7-17><a href=#__codelineno-7-17 id=__codelineno-7-17 name=__codelineno-7-17></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:3::10</span>
</span><span id=__span-7-18><a href=#__codelineno-7-18 id=__codelineno-7-18 name=__codelineno-7-18></a><span class=w>      </span><span class=nt>network4</span><span class=p>:</span>
</span><span id=__span-7-19><a href=#__codelineno-7-19 id=__codelineno-7-19 name=__codelineno-7-19></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.4.10</span>
</span><span id=__span-7-20><a href=#__codelineno-7-20 id=__codelineno-7-20 name=__codelineno-7-20></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:4::10</span>
</span><span id=__span-7-21><a href=#__codelineno-7-21 id=__codelineno-7-21 name=__codelineno-7-21></a><span class=w>      </span><span class=nt>network5</span><span class=p>:</span>
</span><span id=__span-7-22><a href=#__codelineno-7-22 id=__codelineno-7-22 name=__codelineno-7-22></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.5.10</span>
</span><span id=__span-7-23><a href=#__codelineno-7-23 id=__codelineno-7-23 name=__codelineno-7-23></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:5::10</span>
</span><span id=__span-7-24><a href=#__codelineno-7-24 id=__codelineno-7-24 name=__codelineno-7-24></a><span class=w>    </span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-25><a href=#__codelineno-7-25 id=__codelineno-7-25 name=__codelineno-7-25></a><span class=w>    </span><span class=nt>stdin_open</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-26><a href=#__codelineno-7-26 id=__codelineno-7-26 name=__codelineno-7-26></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/bin/bash</span>
</span><span id=__span-7-27><a href=#__codelineno-7-27 id=__codelineno-7-27 name=__codelineno-7-27></a>
</span><span id=__span-7-28><a href=#__codelineno-7-28 id=__codelineno-7-28 name=__codelineno-7-28></a><span class=w>  </span><span class=nt>vyos</span><span class=p>:</span>
</span><span id=__span-7-29><a href=#__codelineno-7-29 id=__codelineno-7-29 name=__codelineno-7-29></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">afla/vyos:1.4</span>
</span><span id=__span-7-30><a href=#__codelineno-7-30 id=__codelineno-7-30 name=__codelineno-7-30></a><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vyos-router</span>
</span><span id=__span-7-31><a href=#__codelineno-7-31 id=__codelineno-7-31 name=__codelineno-7-31></a><span class=w>    </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-32><a href=#__codelineno-7-32 id=__codelineno-7-32 name=__codelineno-7-32></a><span class=w>    </span><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-7-33><a href=#__codelineno-7-33 id=__codelineno-7-33 name=__codelineno-7-33></a><span class=w>      </span><span class=nt>network1</span><span class=p>:</span>
</span><span id=__span-7-34><a href=#__codelineno-7-34 id=__codelineno-7-34 name=__codelineno-7-34></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.1.100</span>
</span><span id=__span-7-35><a href=#__codelineno-7-35 id=__codelineno-7-35 name=__codelineno-7-35></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:1::100</span>
</span><span id=__span-7-36><a href=#__codelineno-7-36 id=__codelineno-7-36 name=__codelineno-7-36></a><span class=w>      </span><span class=nt>network2</span><span class=p>:</span>
</span><span id=__span-7-37><a href=#__codelineno-7-37 id=__codelineno-7-37 name=__codelineno-7-37></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.2.100</span>
</span><span id=__span-7-38><a href=#__codelineno-7-38 id=__codelineno-7-38 name=__codelineno-7-38></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:2::100</span>
</span><span id=__span-7-39><a href=#__codelineno-7-39 id=__codelineno-7-39 name=__codelineno-7-39></a><span class=w>      </span><span class=nt>network3</span><span class=p>:</span>
</span><span id=__span-7-40><a href=#__codelineno-7-40 id=__codelineno-7-40 name=__codelineno-7-40></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.3.100</span>
</span><span id=__span-7-41><a href=#__codelineno-7-41 id=__codelineno-7-41 name=__codelineno-7-41></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:3::100</span>
</span><span id=__span-7-42><a href=#__codelineno-7-42 id=__codelineno-7-42 name=__codelineno-7-42></a><span class=w>      </span><span class=nt>network4</span><span class=p>:</span>
</span><span id=__span-7-43><a href=#__codelineno-7-43 id=__codelineno-7-43 name=__codelineno-7-43></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.4.100</span>
</span><span id=__span-7-44><a href=#__codelineno-7-44 id=__codelineno-7-44 name=__codelineno-7-44></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:4::100</span>
</span><span id=__span-7-45><a href=#__codelineno-7-45 id=__codelineno-7-45 name=__codelineno-7-45></a><span class=w>      </span><span class=nt>network5</span><span class=p>:</span>
</span><span id=__span-7-46><a href=#__codelineno-7-46 id=__codelineno-7-46 name=__codelineno-7-46></a><span class=w>        </span><span class=nt>ipv4_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.5.100</span>
</span><span id=__span-7-47><a href=#__codelineno-7-47 id=__codelineno-7-47 name=__codelineno-7-47></a><span class=w>        </span><span class=nt>ipv6_address</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:5::100</span>
</span><span id=__span-7-48><a href=#__codelineno-7-48 id=__codelineno-7-48 name=__codelineno-7-48></a><span class=w>    </span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-49><a href=#__codelineno-7-49 id=__codelineno-7-49 name=__codelineno-7-49></a><span class=w>    </span><span class=nt>stdin_open</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-50><a href=#__codelineno-7-50 id=__codelineno-7-50 name=__codelineno-7-50></a><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/sbin/init</span>
</span><span id=__span-7-51><a href=#__codelineno-7-51 id=__codelineno-7-51 name=__codelineno-7-51></a>
</span><span id=__span-7-52><a href=#__codelineno-7-52 id=__codelineno-7-52 name=__codelineno-7-52></a><span class=nt>networks</span><span class=p>:</span>
</span><span id=__span-7-53><a href=#__codelineno-7-53 id=__codelineno-7-53 name=__codelineno-7-53></a><span class=w>  </span><span class=nt>network1</span><span class=p>:</span>
</span><span id=__span-7-54><a href=#__codelineno-7-54 id=__codelineno-7-54 name=__codelineno-7-54></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-7-55><a href=#__codelineno-7-55 id=__codelineno-7-55 name=__codelineno-7-55></a><span class=w>    </span><span class=nt>enable_ipv6</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-56><a href=#__codelineno-7-56 id=__codelineno-7-56 name=__codelineno-7-56></a><span class=w>    </span><span class=nt>ipam</span><span class=p>:</span>
</span><span id=__span-7-57><a href=#__codelineno-7-57 id=__codelineno-7-57 name=__codelineno-7-57></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-58><a href=#__codelineno-7-58 id=__codelineno-7-58 name=__codelineno-7-58></a><span class=w>      </span><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-7-59><a href=#__codelineno-7-59 id=__codelineno-7-59 name=__codelineno-7-59></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.1.0/24</span>
</span><span id=__span-7-60><a href=#__codelineno-7-60 id=__codelineno-7-60 name=__codelineno-7-60></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:1::/64</span>
</span><span id=__span-7-61><a href=#__codelineno-7-61 id=__codelineno-7-61 name=__codelineno-7-61></a><span class=w>  </span><span class=nt>network2</span><span class=p>:</span>
</span><span id=__span-7-62><a href=#__codelineno-7-62 id=__codelineno-7-62 name=__codelineno-7-62></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-7-63><a href=#__codelineno-7-63 id=__codelineno-7-63 name=__codelineno-7-63></a><span class=w>    </span><span class=nt>enable_ipv6</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-64><a href=#__codelineno-7-64 id=__codelineno-7-64 name=__codelineno-7-64></a><span class=w>    </span><span class=nt>ipam</span><span class=p>:</span>
</span><span id=__span-7-65><a href=#__codelineno-7-65 id=__codelineno-7-65 name=__codelineno-7-65></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-66><a href=#__codelineno-7-66 id=__codelineno-7-66 name=__codelineno-7-66></a><span class=w>      </span><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-7-67><a href=#__codelineno-7-67 id=__codelineno-7-67 name=__codelineno-7-67></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.2.0/24</span>
</span><span id=__span-7-68><a href=#__codelineno-7-68 id=__codelineno-7-68 name=__codelineno-7-68></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:2::/64</span>
</span><span id=__span-7-69><a href=#__codelineno-7-69 id=__codelineno-7-69 name=__codelineno-7-69></a><span class=w>  </span><span class=nt>network3</span><span class=p>:</span>
</span><span id=__span-7-70><a href=#__codelineno-7-70 id=__codelineno-7-70 name=__codelineno-7-70></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-7-71><a href=#__codelineno-7-71 id=__codelineno-7-71 name=__codelineno-7-71></a><span class=w>    </span><span class=nt>enable_ipv6</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-72><a href=#__codelineno-7-72 id=__codelineno-7-72 name=__codelineno-7-72></a><span class=w>    </span><span class=nt>ipam</span><span class=p>:</span>
</span><span id=__span-7-73><a href=#__codelineno-7-73 id=__codelineno-7-73 name=__codelineno-7-73></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-74><a href=#__codelineno-7-74 id=__codelineno-7-74 name=__codelineno-7-74></a><span class=w>      </span><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-7-75><a href=#__codelineno-7-75 id=__codelineno-7-75 name=__codelineno-7-75></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.3.0/24</span>
</span><span id=__span-7-76><a href=#__codelineno-7-76 id=__codelineno-7-76 name=__codelineno-7-76></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:3::/64</span>
</span><span id=__span-7-77><a href=#__codelineno-7-77 id=__codelineno-7-77 name=__codelineno-7-77></a><span class=w>  </span><span class=nt>network4</span><span class=p>:</span>
</span><span id=__span-7-78><a href=#__codelineno-7-78 id=__codelineno-7-78 name=__codelineno-7-78></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-7-79><a href=#__codelineno-7-79 id=__codelineno-7-79 name=__codelineno-7-79></a><span class=w>    </span><span class=nt>enable_ipv6</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-80><a href=#__codelineno-7-80 id=__codelineno-7-80 name=__codelineno-7-80></a><span class=w>    </span><span class=nt>ipam</span><span class=p>:</span>
</span><span id=__span-7-81><a href=#__codelineno-7-81 id=__codelineno-7-81 name=__codelineno-7-81></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-82><a href=#__codelineno-7-82 id=__codelineno-7-82 name=__codelineno-7-82></a><span class=w>      </span><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-7-83><a href=#__codelineno-7-83 id=__codelineno-7-83 name=__codelineno-7-83></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.4.0/24</span>
</span><span id=__span-7-84><a href=#__codelineno-7-84 id=__codelineno-7-84 name=__codelineno-7-84></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:4::/64</span>
</span><span id=__span-7-85><a href=#__codelineno-7-85 id=__codelineno-7-85 name=__codelineno-7-85></a><span class=w>  </span><span class=nt>network5</span><span class=p>:</span>
</span><span id=__span-7-86><a href=#__codelineno-7-86 id=__codelineno-7-86 name=__codelineno-7-86></a><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span><span id=__span-7-87><a href=#__codelineno-7-87 id=__codelineno-7-87 name=__codelineno-7-87></a><span class=w>    </span><span class=nt>enable_ipv6</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-88><a href=#__codelineno-7-88 id=__codelineno-7-88 name=__codelineno-7-88></a><span class=w>    </span><span class=nt>ipam</span><span class=p>:</span>
</span><span id=__span-7-89><a href=#__codelineno-7-89 id=__codelineno-7-89 name=__codelineno-7-89></a><span class=w>      </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-90><a href=#__codelineno-7-90 id=__codelineno-7-90 name=__codelineno-7-90></a><span class=w>      </span><span class=nt>config</span><span class=p>:</span>
</span><span id=__span-7-91><a href=#__codelineno-7-91 id=__codelineno-7-91 name=__codelineno-7-91></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.5.0/24</span>
</span><span id=__span-7-92><a href=#__codelineno-7-92 id=__codelineno-7-92 name=__codelineno-7-92></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fdb2:2c26:f4e4:5::/64</span>
</span></code></pre></div> <p>Bring the ensamble up using:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>docker-compose<span class=w> </span>up<span class=w> </span>-d
</span><span id=__span-8-2><a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a><span class=o>[</span>+<span class=o>]</span><span class=w> </span>Running<span class=w> </span><span class=m>7</span>/7
</span><span id=__span-8-3><a href=#__codelineno-8-3 id=__codelineno-8-3 name=__codelineno-8-3></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network5<span class=w>  </span>Created<span class=w>   </span><span class=m>0</span>.0s
</span><span id=__span-8-4><a href=#__codelineno-8-4 id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network1<span class=w>  </span>Created<span class=w>   </span><span class=m>0</span>.1s
</span><span id=__span-8-5><a href=#__codelineno-8-5 id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network2<span class=w>  </span>Created<span class=w>   </span><span class=m>0</span>.1s
</span><span id=__span-8-6><a href=#__codelineno-8-6 id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network3<span class=w>  </span>Created<span class=w>   </span><span class=m>0</span>.1s
</span><span id=__span-8-7><a href=#__codelineno-8-7 id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network4<span class=w>  </span>Created<span class=w>   </span><span class=m>0</span>.1s
</span><span id=__span-8-8><a href=#__codelineno-8-8 id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w> </span>⠿<span class=w> </span>Container<span class=w> </span>mininet-instance<span class=w>           </span>Started<span class=w>   </span><span class=m>1</span>.5s
</span><span id=__span-8-9><a href=#__codelineno-8-9 id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w> </span>⠿<span class=w> </span>Container<span class=w> </span>vyos-router<span class=w>                </span>Started<span class=w>   </span><span class=m>1</span>.5s
</span></code></pre></div> <p>You can connect to the MiniNet instance using:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>mininet-instance<span class=w> </span>/bin/bash
</span><span id=__span-9-2><a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a>root@60f20e05ac10:~#...
</span></code></pre></div> <p>You can connect to the Vyos instance using:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>vyos-router<span class=w> </span>/bin/vbash
</span></code></pre></div> <p>You will have to manually switch over the the <code>vyos</code> user:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>su<span class=w> </span>vyos
</span></code></pre></div> <p>Then you can <code>configure</code> to your heart's content:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a href=#__codelineno-12-1 id=__codelineno-12-1 name=__codelineno-12-1></a>vyos@vyos:/$ configure
</span><span id=__span-12-2><a href=#__codelineno-12-2 id=__codelineno-12-2 name=__codelineno-12-2></a>[edit]
</span><span id=__span-12-3><a href=#__codelineno-12-3 id=__codelineno-12-3 name=__codelineno-12-3></a>vyos@vyos# set interfaces ethernet eth0 address 192.168.1.100/24
</span><span id=__span-12-4><a href=#__codelineno-12-4 id=__codelineno-12-4 name=__codelineno-12-4></a>vyos@vyos# set interfaces ethernet eth1 address 192.168.2.100/24
</span><span id=__span-12-5><a href=#__codelineno-12-5 id=__codelineno-12-5 name=__codelineno-12-5></a>vyos@vyos# set interfaces ethernet eth2 address 192.168.3.100/24
</span><span id=__span-12-6><a href=#__codelineno-12-6 id=__codelineno-12-6 name=__codelineno-12-6></a>vyos@vyos# set interfaces ethernet eth3 address 192.168.4.100/24
</span><span id=__span-12-7><a href=#__codelineno-12-7 id=__codelineno-12-7 name=__codelineno-12-7></a>vyos@vyos# set interfaces ethernet eth4 address 192.168.5.100/24
</span><span id=__span-12-8><a href=#__codelineno-12-8 id=__codelineno-12-8 name=__codelineno-12-8></a>vyos@vyos# commit
</span><span id=__span-12-9><a href=#__codelineno-12-9 id=__codelineno-12-9 name=__codelineno-12-9></a>vyos@vyos# save
</span><span id=__span-12-10><a href=#__codelineno-12-10 id=__codelineno-12-10 name=__codelineno-12-10></a>vyos@vyos# exit
</span></code></pre></div> <p>We can tear everything down using:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a href=#__codelineno-13-1 id=__codelineno-13-1 name=__codelineno-13-1></a>docker<span class=w> </span>compose<span class=w> </span>down
</span><span id=__span-13-2><a href=#__codelineno-13-2 id=__codelineno-13-2 name=__codelineno-13-2></a><span class=o>[</span>+<span class=o>]</span><span class=w> </span>Running<span class=w> </span><span class=m>7</span>/7
</span><span id=__span-13-3><a href=#__codelineno-13-3 id=__codelineno-13-3 name=__codelineno-13-3></a><span class=w> </span>⠿<span class=w> </span>Container<span class=w> </span>mininet-instance<span class=w>           </span>Removed<span class=w>  </span><span class=m>11</span>.1s
</span><span id=__span-13-4><a href=#__codelineno-13-4 id=__codelineno-13-4 name=__codelineno-13-4></a><span class=w> </span>⠿<span class=w> </span>Container<span class=w> </span>vyos-router<span class=w>                </span>Removed<span class=w>  </span><span class=m>11</span>.2s
</span><span id=__span-13-5><a href=#__codelineno-13-5 id=__codelineno-13-5 name=__codelineno-13-5></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network5<span class=w>  </span>Removed<span class=w>  </span><span class=m>0</span>.4s
</span><span id=__span-13-6><a href=#__codelineno-13-6 id=__codelineno-13-6 name=__codelineno-13-6></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network2<span class=w>  </span>Removed<span class=w>  </span><span class=m>0</span>.1s
</span><span id=__span-13-7><a href=#__codelineno-13-7 id=__codelineno-13-7 name=__codelineno-13-7></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network4<span class=w>  </span>Removed<span class=w>  </span><span class=m>0</span>.3s
</span><span id=__span-13-8><a href=#__codelineno-13-8 id=__codelineno-13-8 name=__codelineno-13-8></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network1<span class=w>  </span>Removed<span class=w>  </span><span class=m>0</span>.3s
</span><span id=__span-13-9><a href=#__codelineno-13-9 id=__codelineno-13-9 name=__codelineno-13-9></a><span class=w> </span>⠿<span class=w> </span>Network<span class=w> </span>chatgpt-networking_network3<span class=w>  </span>Removed<span class=w>  </span><span class=m>0</span>.2s
</span></code></pre></div> <hr> <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a href=#__codelineno-14-1 id=__codelineno-14-1 name=__codelineno-14-1></a><span class=kn>from</span> <span class=nn>mininet.net</span> <span class=kn>import</span> <span class=n>Mininet</span>
</span><span id=__span-14-2><a href=#__codelineno-14-2 id=__codelineno-14-2 name=__codelineno-14-2></a><span class=kn>from</span> <span class=nn>mininet.node</span> <span class=kn>import</span> <span class=n>OVSController</span><span class=p>,</span> <span class=n>OVSSwitch</span>
</span><span id=__span-14-3><a href=#__codelineno-14-3 id=__codelineno-14-3 name=__codelineno-14-3></a><span class=kn>from</span> <span class=nn>mininet.cli</span> <span class=kn>import</span> <span class=n>CLI</span>
</span><span id=__span-14-4><a href=#__codelineno-14-4 id=__codelineno-14-4 name=__codelineno-14-4></a><span class=kn>from</span> <span class=nn>mininet.log</span> <span class=kn>import</span> <span class=n>setLogLevel</span><span class=p>,</span> <span class=n>info</span>
</span><span id=__span-14-5><a href=#__codelineno-14-5 id=__codelineno-14-5 name=__codelineno-14-5></a>
</span><span id=__span-14-6><a href=#__codelineno-14-6 id=__codelineno-14-6 name=__codelineno-14-6></a><span class=k>def</span> <span class=nf>create_network_topology</span><span class=p>():</span>
</span><span id=__span-14-7><a href=#__codelineno-14-7 id=__codelineno-14-7 name=__codelineno-14-7></a>    <span class=n>net</span> <span class=o>=</span> <span class=n>Mininet</span><span class=p>(</span><span class=n>controller</span><span class=o>=</span><span class=n>OVSController</span><span class=p>,</span> <span class=n>switch</span><span class=o>=</span><span class=n>OVSSwitch</span><span class=p>)</span>
</span><span id=__span-14-8><a href=#__codelineno-14-8 id=__codelineno-14-8 name=__codelineno-14-8></a>
</span><span id=__span-14-9><a href=#__codelineno-14-9 id=__codelineno-14-9 name=__codelineno-14-9></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Adding controller</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-10><a href=#__codelineno-14-10 id=__codelineno-14-10 name=__codelineno-14-10></a>    <span class=n>c0</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addController</span><span class=p>(</span><span class=s1>'c0'</span><span class=p>)</span>
</span><span id=__span-14-11><a href=#__codelineno-14-11 id=__codelineno-14-11 name=__codelineno-14-11></a>
</span><span id=__span-14-12><a href=#__codelineno-14-12 id=__codelineno-14-12 name=__codelineno-14-12></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Adding switch</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-13><a href=#__codelineno-14-13 id=__codelineno-14-13 name=__codelineno-14-13></a>    <span class=n>s1</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addSwitch</span><span class=p>(</span><span class=s1>'s1'</span><span class=p>)</span>
</span><span id=__span-14-14><a href=#__codelineno-14-14 id=__codelineno-14-14 name=__codelineno-14-14></a>
</span><span id=__span-14-15><a href=#__codelineno-14-15 id=__codelineno-14-15 name=__codelineno-14-15></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Adding hosts</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-16><a href=#__codelineno-14-16 id=__codelineno-14-16 name=__codelineno-14-16></a>    <span class=n>hosts</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-14-17><a href=#__codelineno-14-17 id=__codelineno-14-17 name=__codelineno-14-17></a>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>6</span><span class=p>):</span>
</span><span id=__span-14-18><a href=#__codelineno-14-18 id=__codelineno-14-18 name=__codelineno-14-18></a>        <span class=n>host</span> <span class=o>=</span> <span class=n>net</span><span class=o>.</span><span class=n>addHost</span><span class=p>(</span><span class=s1>'h</span><span class=si>{}</span><span class=s1>'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>i</span><span class=p>),</span> <span class=n>ip</span><span class=o>=</span><span class=s1>'192.168.</span><span class=si>{}</span><span class=s1>.2/24'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>i</span><span class=p>),</span> <span class=n>ipv6</span><span class=o>=</span><span class=s1>'fdb2:2c26:f4e4:</span><span class=si>{}</span><span class=s1>::2/64'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
</span><span id=__span-14-19><a href=#__codelineno-14-19 id=__codelineno-14-19 name=__codelineno-14-19></a>        <span class=n>hosts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
</span><span id=__span-14-20><a href=#__codelineno-14-20 id=__codelineno-14-20 name=__codelineno-14-20></a>
</span><span id=__span-14-21><a href=#__codelineno-14-21 id=__codelineno-14-21 name=__codelineno-14-21></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Creating links</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-22><a href=#__codelineno-14-22 id=__codelineno-14-22 name=__codelineno-14-22></a>    <span class=k>for</span> <span class=n>host</span> <span class=ow>in</span> <span class=n>hosts</span><span class=p>:</span>
</span><span id=__span-14-23><a href=#__codelineno-14-23 id=__codelineno-14-23 name=__codelineno-14-23></a>        <span class=n>net</span><span class=o>.</span><span class=n>addLink</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span> <span class=n>host</span><span class=p>)</span>
</span><span id=__span-14-24><a href=#__codelineno-14-24 id=__codelineno-14-24 name=__codelineno-14-24></a>
</span><span id=__span-14-25><a href=#__codelineno-14-25 id=__codelineno-14-25 name=__codelineno-14-25></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Starting network</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-26><a href=#__codelineno-14-26 id=__codelineno-14-26 name=__codelineno-14-26></a>    <span class=n>net</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span><span id=__span-14-27><a href=#__codelineno-14-27 id=__codelineno-14-27 name=__codelineno-14-27></a>
</span><span id=__span-14-28><a href=#__codelineno-14-28 id=__codelineno-14-28 name=__codelineno-14-28></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Running CLI</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-29><a href=#__codelineno-14-29 id=__codelineno-14-29 name=__codelineno-14-29></a>    <span class=n>CLI</span><span class=p>(</span><span class=n>net</span><span class=p>)</span>
</span><span id=__span-14-30><a href=#__codelineno-14-30 id=__codelineno-14-30 name=__codelineno-14-30></a>
</span><span id=__span-14-31><a href=#__codelineno-14-31 id=__codelineno-14-31 name=__codelineno-14-31></a>    <span class=n>info</span><span class=p>(</span><span class=s2>"*** Stopping network</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-14-32><a href=#__codelineno-14-32 id=__codelineno-14-32 name=__codelineno-14-32></a>    <span class=n>net</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span><span id=__span-14-33><a href=#__codelineno-14-33 id=__codelineno-14-33 name=__codelineno-14-33></a>
</span><span id=__span-14-34><a href=#__codelineno-14-34 id=__codelineno-14-34 name=__codelineno-14-34></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>'__main__'</span><span class=p>:</span>
</span><span id=__span-14-35><a href=#__codelineno-14-35 id=__codelineno-14-35 name=__codelineno-14-35></a>    <span class=n>setLogLevel</span><span class=p>(</span><span class=s1>'info'</span><span class=p>)</span>
</span><span id=__span-14-36><a href=#__codelineno-14-36 id=__codelineno-14-36 name=__codelineno-14-36></a>    <span class=n>create_network_topology</span><span class=p>()</span>
</span></code></pre></div> <hr> <h2 id=graveyard>Graveyard<a class=headerlink href=#graveyard title="Permanent link">¶</a></h2> <h3 id=building-iso>Building ISO<a class=headerlink href=#building-iso title="Permanent link">¶</a></h3> <ul> <li><a href="https://docs.vyos.io/en/equuleus/contributing/build-vyos.html?highlight=docker">Reference</a></li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a href=#__codelineno-15-1 id=__codelineno-15-1 name=__codelineno-15-1></a>docker<span class=w> </span>pull<span class=w> </span>vyos/vyos-build:equuleus
</span><span id=__span-15-2><a href=#__codelineno-15-2 id=__codelineno-15-2 name=__codelineno-15-2></a>
</span><span id=__span-15-3><a href=#__codelineno-15-3 id=__codelineno-15-3 name=__codelineno-15-3></a><span class=nb>cd</span><span class=w> </span>~/Source
</span><span id=__span-15-4><a href=#__codelineno-15-4 id=__codelineno-15-4 name=__codelineno-15-4></a>git<span class=w> </span>clone<span class=w> </span>-b<span class=w> </span>equuleus<span class=w> </span>--single-branch<span class=w> </span>https://github.com/vyos/vyos-build
</span><span id=__span-15-5><a href=#__codelineno-15-5 id=__codelineno-15-5 name=__codelineno-15-5></a>
</span><span id=__span-15-6><a href=#__codelineno-15-6 id=__codelineno-15-6 name=__codelineno-15-6></a><span class=nb>cd</span><span class=w> </span>vyos-build
</span><span id=__span-15-7><a href=#__codelineno-15-7 id=__codelineno-15-7 name=__codelineno-15-7></a>docker<span class=w> </span>build<span class=w> </span>-t<span class=w> </span>vyos/vyos-build:equuleus<span class=w> </span>docker<span class=w>  </span><span class=c1># For VyOS 1.3</span>
</span><span id=__span-15-8><a href=#__codelineno-15-8 id=__codelineno-15-8 name=__codelineno-15-8></a>
</span><span id=__span-15-9><a href=#__codelineno-15-9 id=__codelineno-15-9 name=__codelineno-15-9></a>docker<span class=w> </span>run<span class=w> </span>--rm<span class=w> </span>-it<span class=w> </span>--privileged<span class=w> </span>-v<span class=w> </span><span class=k>$(</span><span class=nb>pwd</span><span class=k>)</span>:/vyos<span class=w> </span>-w<span class=w> </span>/vyos<span class=w> </span>vyos/vyos-build:equuleus<span class=w> </span>bash
</span><span id=__span-15-10><a href=#__codelineno-15-10 id=__codelineno-15-10 name=__codelineno-15-10></a>
</span><span id=__span-15-11><a href=#__codelineno-15-11 id=__codelineno-15-11 name=__codelineno-15-11></a>./configure<span class=w> </span>--architecture<span class=w> </span>amd64<span class=w> </span>--build-by<span class=w> </span><span class=s2>"j.randomhacker@vyos.io"</span>
</span><span id=__span-15-12><a href=#__codelineno-15-12 id=__codelineno-15-12 name=__codelineno-15-12></a>sudo<span class=w> </span>make<span class=w> </span>iso
</span></code></pre></div> <h3 id=using-docker>Using Docker<a class=headerlink href=#using-docker title="Permanent link">¶</a></h3> <h4 id=create-network>Create Network<a class=headerlink href=#create-network title="Permanent link">¶</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a href=#__codelineno-16-1 id=__codelineno-16-1 name=__codelineno-16-1></a>$<span class=w> </span>docker<span class=w> </span>network<span class=w> </span>create<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-2><a href=#__codelineno-16-2 id=__codelineno-16-2 name=__codelineno-16-2></a><span class=w>    </span>--ipv6<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-3><a href=#__codelineno-16-3 id=__codelineno-16-3 name=__codelineno-16-3></a><span class=w>    </span>-d<span class=w> </span>macvlan<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-4><a href=#__codelineno-16-4 id=__codelineno-16-4 name=__codelineno-16-4></a><span class=w>    </span>-o<span class=w> </span><span class=nv>parent</span><span class=o>=</span>eth0<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-5><a href=#__codelineno-16-5 id=__codelineno-16-5 name=__codelineno-16-5></a><span class=w>    </span>--subnet<span class=w> </span><span class=m>2001</span>:db8::/64<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-6><a href=#__codelineno-16-6 id=__codelineno-16-6 name=__codelineno-16-6></a><span class=w>    </span>--subnet<span class=w> </span><span class=m>192</span>.0.2.0/24<span class=w> </span>local-net
</span></code></pre></div> <h4 id=check-networks>Check Networks<a class=headerlink href=#check-networks title="Permanent link">¶</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a href=#__codelineno-17-1 id=__codelineno-17-1 name=__codelineno-17-1></a>$<span class=w> </span>docker<span class=w> </span>network<span class=w> </span>ls
</span><span id=__span-17-2><a href=#__codelineno-17-2 id=__codelineno-17-2 name=__codelineno-17-2></a>NETWORK<span class=w> </span>ID<span class=w>     </span>NAME<span class=w>        </span>DRIVER<span class=w>    </span>SCOPE
</span><span id=__span-17-3><a href=#__codelineno-17-3 id=__codelineno-17-3 name=__codelineno-17-3></a>c87269d489a1<span class=w>   </span>bridge<span class=w>      </span>bridge<span class=w>    </span><span class=nb>local</span>
</span><span id=__span-17-4><a href=#__codelineno-17-4 id=__codelineno-17-4 name=__codelineno-17-4></a>0d709442c21f<span class=w>   </span>host<span class=w>        </span>host<span class=w>      </span><span class=nb>local</span>
</span><span id=__span-17-5><a href=#__codelineno-17-5 id=__codelineno-17-5 name=__codelineno-17-5></a>134ab75c1677<span class=w>   </span>logs_loki<span class=w>   </span>bridge<span class=w>    </span><span class=nb>local</span>
</span><span id=__span-17-6><a href=#__codelineno-17-6 id=__codelineno-17-6 name=__codelineno-17-6></a>1ff7747e7854<span class=w>   </span>local-net<span class=w>   </span>macvlan<span class=w>   </span><span class=nb>local</span>
</span><span id=__span-17-7><a href=#__codelineno-17-7 id=__codelineno-17-7 name=__codelineno-17-7></a>192b67e5fd7d<span class=w>   </span>none<span class=w>        </span>null<span class=w>      </span><span class=nb>local</span>
</span></code></pre></div> <h4 id=start-vyos-container>Start Vyos Container<a class=headerlink href=#start-vyos-container title="Permanent link">¶</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>
</span><span id=__span-18-2><a href=#__codelineno-18-2 id=__codelineno-18-2 name=__codelineno-18-2></a><span class=w>    </span>-it<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-3><a href=#__codelineno-18-3 id=__codelineno-18-3 name=__codelineno-18-3></a><span class=w>    </span>--rm<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-4><a href=#__codelineno-18-4 id=__codelineno-18-4 name=__codelineno-18-4></a><span class=w>    </span>-v<span class=w> </span>/lib/modules:/lib/modules<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-5><a href=#__codelineno-18-5 id=__codelineno-18-5 name=__codelineno-18-5></a><span class=w>    </span>-v<span class=w> </span>vyos-config:/opt/vyatta/etc/config/<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-6><a href=#__codelineno-18-6 id=__codelineno-18-6 name=__codelineno-18-6></a><span class=w>    </span>--privileged<span class=w>  </span><span class=se>\</span>
</span><span id=__span-18-7><a href=#__codelineno-18-7 id=__codelineno-18-7 name=__codelineno-18-7></a><span class=w>    </span>--network<span class=w> </span>local-net<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-8><a href=#__codelineno-18-8 id=__codelineno-18-8 name=__codelineno-18-8></a><span class=w>    </span>--sysctl<span class=w> </span>net.ipv6.conf.all.disable_ipv6<span class=o>=</span><span class=m>0</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-18-9><a href=#__codelineno-18-9 id=__codelineno-18-9 name=__codelineno-18-9></a><span class=w>    </span>-p<span class=w> </span><span class=m>179</span>:179<span class=w>  </span><span class=se>\</span>
</span><span id=__span-18-10><a href=#__codelineno-18-10 id=__codelineno-18-10 name=__codelineno-18-10></a><span class=w>    </span>-p<span class=w> </span><span class=m>8000</span>:8080<span class=w>  </span><span class=se>\</span>
</span><span id=__span-18-11><a href=#__codelineno-18-11 id=__codelineno-18-11 name=__codelineno-18-11></a><span class=w>    </span>--name<span class=w> </span>vyos-router<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-12><a href=#__codelineno-18-12 id=__codelineno-18-12 name=__codelineno-18-12></a><span class=w>    </span>-d<span class=w> </span>afla/vyos:1.4
</span><span id=__span-18-13><a href=#__codelineno-18-13 id=__codelineno-18-13 name=__codelineno-18-13></a>$<span class=w> </span>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>vyos-router<span class=w> </span>vbash
</span><span id=__span-18-14><a href=#__codelineno-18-14 id=__codelineno-18-14 name=__codelineno-18-14></a>vbash-4.1#<span class=w> </span>su<span class=w> </span>vyos
</span><span id=__span-18-15><a href=#__codelineno-18-15 id=__codelineno-18-15 name=__codelineno-18-15></a>vyos@vyos:/$<span class=w> </span>ifconfig
</span><span id=__span-18-16><a href=#__codelineno-18-16 id=__codelineno-18-16 name=__codelineno-18-16></a>eth0:<span class=w> </span><span class=nv>flags</span><span class=o>=</span><span class=m>4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;<span class=w>  </span>mtu<span class=w> </span><span class=m>1500</span>
</span><span id=__span-18-17><a href=#__codelineno-18-17 id=__codelineno-18-17 name=__codelineno-18-17></a><span class=w>        </span>inet<span class=w> </span><span class=m>192</span>.0.2.1<span class=w>  </span>netmask<span class=w> </span><span class=m>255</span>.255.255.0<span class=w>  </span>broadcast<span class=w> </span><span class=m>192</span>.0.2.255
</span><span id=__span-18-18><a href=#__codelineno-18-18 id=__codelineno-18-18 name=__codelineno-18-18></a><span class=w>        </span>inet6<span class=w> </span>fe80::42:c0ff:fe00:202<span class=w>  </span>prefixlen<span class=w> </span><span class=m>64</span><span class=w>  </span>scopeid<span class=w> </span>0x20&lt;link&gt;
</span><span id=__span-18-19><a href=#__codelineno-18-19 id=__codelineno-18-19 name=__codelineno-18-19></a><span class=w>        </span>ether<span class=w> </span><span class=m>02</span>:42:c0:00:02:02<span class=w>  </span>txqueuelen<span class=w> </span><span class=m>0</span><span class=w>  </span><span class=o>(</span>Ethernet<span class=o>)</span>
</span><span id=__span-18-20><a href=#__codelineno-18-20 id=__codelineno-18-20 name=__codelineno-18-20></a><span class=w>        </span>RX<span class=w> </span>packets<span class=w> </span><span class=m>0</span><span class=w>  </span>bytes<span class=w> </span><span class=m>0</span><span class=w> </span><span class=o>(</span><span class=m>0</span>.0<span class=w> </span>B<span class=o>)</span>
</span><span id=__span-18-21><a href=#__codelineno-18-21 id=__codelineno-18-21 name=__codelineno-18-21></a><span class=w>        </span>RX<span class=w> </span>errors<span class=w> </span><span class=m>0</span><span class=w>  </span>dropped<span class=w> </span><span class=m>0</span><span class=w>  </span>overruns<span class=w> </span><span class=m>0</span><span class=w>  </span>frame<span class=w> </span><span class=m>0</span>
</span><span id=__span-18-22><a href=#__codelineno-18-22 id=__codelineno-18-22 name=__codelineno-18-22></a><span class=w>        </span>TX<span class=w> </span>packets<span class=w> </span><span class=m>9</span><span class=w>  </span>bytes<span class=w> </span><span class=m>1306</span><span class=w> </span><span class=o>(</span><span class=m>1</span>.2<span class=w> </span>KiB<span class=o>)</span>
</span><span id=__span-18-23><a href=#__codelineno-18-23 id=__codelineno-18-23 name=__codelineno-18-23></a><span class=w>        </span>TX<span class=w> </span>errors<span class=w> </span><span class=m>0</span><span class=w>  </span>dropped<span class=w> </span><span class=m>0</span><span class=w> </span>overruns<span class=w> </span><span class=m>0</span><span class=w>  </span>carrier<span class=w> </span><span class=m>0</span><span class=w>  </span>collisions<span class=w> </span><span class=m>0</span>
</span><span id=__span-18-24><a href=#__codelineno-18-24 id=__codelineno-18-24 name=__codelineno-18-24></a>...
</span></code></pre></div> <h4 id=start-mininet-container>Start MiniNet Container<a class=headerlink href=#start-mininet-container title="Permanent link">¶</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a>$<span class=w> </span>docker<span class=w> </span>pull<span class=w> </span>iwaseyusuke/mininet
</span><span id=__span-19-2><a href=#__codelineno-19-2 id=__codelineno-19-2 name=__codelineno-19-2></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--rm<span class=w> </span>--privileged<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-3><a href=#__codelineno-19-3 id=__codelineno-19-3 name=__codelineno-19-3></a><span class=w>    </span>-v<span class=w> </span>/lib/modules:/lib/modules<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-4><a href=#__codelineno-19-4 id=__codelineno-19-4 name=__codelineno-19-4></a><span class=w>    </span>--network<span class=w> </span>local-net<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-5><a href=#__codelineno-19-5 id=__codelineno-19-5 name=__codelineno-19-5></a><span class=w>    </span>iwaseyusuke/mininet
</span><span id=__span-19-6><a href=#__codelineno-19-6 id=__codelineno-19-6 name=__codelineno-19-6></a><span class=w> </span>*<span class=w> </span>/etc/openvswitch/conf.db<span class=w> </span>does<span class=w> </span>not<span class=w> </span>exist
</span><span id=__span-19-7><a href=#__codelineno-19-7 id=__codelineno-19-7 name=__codelineno-19-7></a><span class=w> </span>*<span class=w> </span>Creating<span class=w> </span>empty<span class=w> </span>database<span class=w> </span>/etc/openvswitch/conf.db
</span><span id=__span-19-8><a href=#__codelineno-19-8 id=__codelineno-19-8 name=__codelineno-19-8></a><span class=w> </span>*<span class=w> </span>Starting<span class=w> </span>ovsdb-server
</span><span id=__span-19-9><a href=#__codelineno-19-9 id=__codelineno-19-9 name=__codelineno-19-9></a><span class=w> </span>*<span class=w> </span>Configuring<span class=w> </span>Open<span class=w> </span>vSwitch<span class=w> </span>system<span class=w> </span>IDs
</span><span id=__span-19-10><a href=#__codelineno-19-10 id=__codelineno-19-10 name=__codelineno-19-10></a><span class=w> </span>*<span class=w> </span>Starting<span class=w> </span>ovs-vswitchd
</span><span id=__span-19-11><a href=#__codelineno-19-11 id=__codelineno-19-11 name=__codelineno-19-11></a><span class=w> </span>*<span class=w> </span>Enabling<span class=w> </span>remote<span class=w> </span>OVSDB<span class=w> </span>managers
</span><span id=__span-19-12><a href=#__codelineno-19-12 id=__codelineno-19-12 name=__codelineno-19-12></a>root@e948a861e4d8:~#<span class=w> </span>ifconfig
</span><span id=__span-19-13><a href=#__codelineno-19-13 id=__codelineno-19-13 name=__codelineno-19-13></a>eth0:<span class=w> </span><span class=nv>flags</span><span class=o>=</span><span class=m>4163</span>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;<span class=w>  </span>mtu<span class=w> </span><span class=m>1500</span>
</span><span id=__span-19-14><a href=#__codelineno-19-14 id=__codelineno-19-14 name=__codelineno-19-14></a><span class=w>        </span>inet<span class=w> </span><span class=m>192</span>.0.2.3<span class=w>  </span>netmask<span class=w> </span><span class=m>255</span>.255.255.0<span class=w>  </span>broadcast<span class=w> </span><span class=m>192</span>.0.2.255
</span><span id=__span-19-15><a href=#__codelineno-19-15 id=__codelineno-19-15 name=__codelineno-19-15></a><span class=w>        </span>inet6<span class=w> </span>fe80::42:c0ff:fe00:203<span class=w>  </span>prefixlen<span class=w> </span><span class=m>64</span><span class=w>  </span>scopeid<span class=w> </span>0x20&lt;link&gt;
</span><span id=__span-19-16><a href=#__codelineno-19-16 id=__codelineno-19-16 name=__codelineno-19-16></a><span class=w>        </span>inet6<span class=w> </span><span class=m>2001</span>:db8::3<span class=w>  </span>prefixlen<span class=w> </span><span class=m>64</span><span class=w>  </span>scopeid<span class=w> </span>0x0&lt;global&gt;
</span><span id=__span-19-17><a href=#__codelineno-19-17 id=__codelineno-19-17 name=__codelineno-19-17></a><span class=w>        </span>ether<span class=w> </span><span class=m>02</span>:42:c0:00:02:03<span class=w>  </span>txqueuelen<span class=w> </span><span class=m>0</span><span class=w>  </span><span class=o>(</span>Ethernet<span class=o>)</span>
</span><span id=__span-19-18><a href=#__codelineno-19-18 id=__codelineno-19-18 name=__codelineno-19-18></a><span class=w>        </span>RX<span class=w> </span>packets<span class=w> </span><span class=m>0</span><span class=w>  </span>bytes<span class=w> </span><span class=m>0</span><span class=w> </span><span class=o>(</span><span class=m>0</span>.0<span class=w> </span>B<span class=o>)</span>
</span><span id=__span-19-19><a href=#__codelineno-19-19 id=__codelineno-19-19 name=__codelineno-19-19></a><span class=w>        </span>RX<span class=w> </span>errors<span class=w> </span><span class=m>0</span><span class=w>  </span>dropped<span class=w> </span><span class=m>0</span><span class=w>  </span>overruns<span class=w> </span><span class=m>0</span><span class=w>  </span>frame<span class=w> </span><span class=m>0</span>
</span><span id=__span-19-20><a href=#__codelineno-19-20 id=__codelineno-19-20 name=__codelineno-19-20></a><span class=w>        </span>TX<span class=w> </span>packets<span class=w> </span><span class=m>6</span><span class=w>  </span>bytes<span class=w> </span><span class=m>596</span><span class=w> </span><span class=o>(</span><span class=m>596</span>.0<span class=w> </span>B<span class=o>)</span>
</span><span id=__span-19-21><a href=#__codelineno-19-21 id=__codelineno-19-21 name=__codelineno-19-21></a><span class=w>        </span>TX<span class=w> </span>errors<span class=w> </span><span class=m>0</span><span class=w>  </span>dropped<span class=w> </span><span class=m>0</span><span class=w> </span>overruns<span class=w> </span><span class=m>0</span><span class=w>  </span>carrier<span class=w> </span><span class=m>0</span><span class=w>  </span>collisions<span class=w> </span><span class=m>0</span>
</span><span id=__span-19-22><a href=#__codelineno-19-22 id=__codelineno-19-22 name=__codelineno-19-22></a>...
</span></code></pre></div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a>root@e948a861e4d8:~#<span class=w> </span>ping<span class=w> </span><span class=m>192</span>.0.2.1
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a>PING<span class=w> </span><span class=m>192</span>.0.2.1<span class=w> </span><span class=o>(</span><span class=m>192</span>.0.2.1<span class=o>)</span><span class=w> </span><span class=m>56</span><span class=o>(</span><span class=m>84</span><span class=o>)</span><span class=w> </span>bytes<span class=w> </span>of<span class=w> </span>data.
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a><span class=m>64</span><span class=w> </span>bytes<span class=w> </span>from<span class=w> </span><span class=m>192</span>.0.2.1:<span class=w> </span><span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span><span class=w> </span><span class=nv>ttl</span><span class=o>=</span><span class=m>64</span><span class=w> </span><span class=nv>time</span><span class=o>=</span><span class=m>1</span>.83<span class=w> </span>ms
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a>...
</span></code></pre></div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a>vyos@vyos:/$<span class=w> </span>ping<span class=w> </span><span class=m>192</span>.0.2.3
</span><span id=__span-21-2><a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a>PING<span class=w> </span><span class=m>192</span>.0.2.3<span class=w> </span><span class=o>(</span><span class=m>192</span>.0.2.3<span class=o>)</span><span class=w> </span><span class=m>56</span><span class=o>(</span><span class=m>84</span><span class=o>)</span><span class=w> </span>bytes<span class=w> </span>of<span class=w> </span>data.
</span><span id=__span-21-3><a href=#__codelineno-21-3 id=__codelineno-21-3 name=__codelineno-21-3></a><span class=m>64</span><span class=w> </span>bytes<span class=w> </span>from<span class=w> </span><span class=m>192</span>.0.2.3:<span class=w> </span><span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span><span class=w> </span><span class=nv>ttl</span><span class=o>=</span><span class=m>64</span><span class=w> </span><span class=nv>time</span><span class=o>=</span><span class=m>0</span>.132<span class=w> </span>ms
</span><span id=__span-21-4><a href=#__codelineno-21-4 id=__codelineno-21-4 name=__codelineno-21-4></a>...
</span></code></pre></div> <hr> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a>docker<span class=w> </span>network<span class=w> </span>create<span class=w> </span>--driver<span class=w> </span>bridge<span class=w> </span>mininet_vyos_net
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a>docker<span class=w> </span>run<span class=w> </span>-d<span class=w> </span>--name<span class=w> </span>vyos-router<span class=w> </span>--privileged<span class=w> </span>--network<span class=w> </span>mininet_vyos_net<span class=w> </span>vyos/vyos
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a>docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--name<span class=w> </span>mininet-instance<span class=w> </span>--privileged<span class=w> </span>--network<span class=w> </span>mininet_vyos_net<span class=w> </span>opennetworkinglab/mininet
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a>
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a>configure
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a><span class=nb>set</span><span class=w> </span>interfaces<span class=w> </span>ethernet<span class=w> </span>eth0<span class=w> </span>address<span class=w> </span><span class=m>172</span>.18.0.2/16
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a><span class=nb>set</span><span class=w> </span>interfaces<span class=w> </span>ethernet<span class=w> </span>eth0<span class=w> </span>description<span class=w> </span><span class=s1>'Connection to Mininet'</span>
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>start<span class=w> </span><span class=m>172</span>.18.0.100<span class=w> </span>stop<span class=w> </span><span class=m>172</span>.18.0.101
</span><span id=__span-22-9><a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a>commit
</span><span id=__span-22-10><a href=#__codelineno-22-10 id=__codelineno-22-10 name=__codelineno-22-10></a>save
</span><span id=__span-22-11><a href=#__codelineno-22-11 id=__codelineno-22-11 name=__codelineno-22-11></a><span class=nb>exit</span>
</span><span id=__span-22-12><a href=#__codelineno-22-12 id=__codelineno-22-12 name=__codelineno-22-12></a>
</span><span id=__span-22-13><a href=#__codelineno-22-13 id=__codelineno-22-13 name=__codelineno-22-13></a>
</span><span id=__span-22-14><a href=#__codelineno-22-14 id=__codelineno-22-14 name=__codelineno-22-14></a><span class=nb>set</span><span class=w> </span>interfaces<span class=w> </span>ethernet<span class=w> </span>eth0<span class=w> </span>address<span class=w> </span><span class=m>172</span>.18.0.2/24
</span><span id=__span-22-15><a href=#__codelineno-22-15 id=__codelineno-22-15 name=__codelineno-22-15></a><span class=nb>set</span><span class=w> </span>interfaces<span class=w> </span>ethernet<span class=w> </span>eth0<span class=w> </span>description<span class=w> </span><span class=s1>'Connection to Mininet'</span>
</span><span id=__span-22-16><a href=#__codelineno-22-16 id=__codelineno-22-16 name=__codelineno-22-16></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>default-router<span class=w> </span><span class=m>172</span>.18.0.1
</span><span id=__span-22-17><a href=#__codelineno-22-17 id=__codelineno-22-17 name=__codelineno-22-17></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>dns-server<span class=w> </span><span class=m>172</span>.18.0.1
</span><span id=__span-22-18><a href=#__codelineno-22-18 id=__codelineno-22-18 name=__codelineno-22-18></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>lease<span class=w> </span><span class=m>86400</span>
</span><span id=__span-22-19><a href=#__codelineno-22-19 id=__codelineno-22-19 name=__codelineno-22-19></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>range<span class=w> </span><span class=m>0</span><span class=w> </span>start<span class=w> </span><span class=m>172</span>.18.0.100
</span><span id=__span-22-20><a href=#__codelineno-22-20 id=__codelineno-22-20 name=__codelineno-22-20></a><span class=nb>set</span><span class=w> </span>service<span class=w> </span>dhcp-server<span class=w> </span>shared-network-name<span class=w> </span>LAN<span class=w> </span>subnet<span class=w> </span><span class=m>172</span>.18.0.0/24<span class=w> </span>range<span class=w> </span><span class=m>0</span><span class=w> </span>stop<span class=w> </span><span class=m>172</span>.18.0.200
</span><span id=__span-22-21><a href=#__codelineno-22-21 id=__codelineno-22-21 name=__codelineno-22-21></a>
</span><span id=__span-22-22><a href=#__codelineno-22-22 id=__codelineno-22-22 name=__codelineno-22-22></a>commit
</span></code></pre></div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a><span class=c1># Pull Mininet and VyOS images</span>
</span><span id=__span-23-2><a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a>docker<span class=w> </span>pull<span class=w> </span>opennetworkinglab/mininet
</span><span id=__span-23-3><a href=#__codelineno-23-3 id=__codelineno-23-3 name=__codelineno-23-3></a>docker<span class=w> </span>pull<span class=w> </span>vyos/vyos
</span><span id=__span-23-4><a href=#__codelineno-23-4 id=__codelineno-23-4 name=__codelineno-23-4></a>
</span><span id=__span-23-5><a href=#__codelineno-23-5 id=__codelineno-23-5 name=__codelineno-23-5></a><span class=c1># Create a Docker network:</span>
</span><span id=__span-23-6><a href=#__codelineno-23-6 id=__codelineno-23-6 name=__codelineno-23-6></a>docker<span class=w> </span>network<span class=w> </span>create<span class=w> </span>--driver<span class=w> </span>bridge<span class=w> </span>mininet_vyos_net
</span><span id=__span-23-7><a href=#__codelineno-23-7 id=__codelineno-23-7 name=__codelineno-23-7></a>
</span><span id=__span-23-8><a href=#__codelineno-23-8 id=__codelineno-23-8 name=__codelineno-23-8></a>docker<span class=w> </span>run<span class=w> </span>-d<span class=w> </span>--name<span class=w> </span>vyos-router<span class=w> </span>--privileged<span class=w> </span>--network<span class=w> </span>mininet_vyos_net<span class=w> </span>vyos/vyos
</span><span id=__span-23-9><a href=#__codelineno-23-9 id=__codelineno-23-9 name=__codelineno-23-9></a>
</span><span id=__span-23-10><a href=#__codelineno-23-10 id=__codelineno-23-10 name=__codelineno-23-10></a>docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--name<span class=w> </span>mininet-instance<span class=w> </span>--privileged<span class=w> </span>--network<span class=w> </span>mininet_vyos_net<span class=w> </span>opennetworkinglab/mininet
</span><span id=__span-23-11><a href=#__codelineno-23-11 id=__codelineno-23-11 name=__codelineno-23-11></a>
</span><span id=__span-23-12><a href=#__codelineno-23-12 id=__codelineno-23-12 name=__codelineno-23-12></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>vyos-router<span class=w> </span>/bin/vbash
</span></code></pre></div> <h4 id=references>References<a class=headerlink href=#references title="Permanent link">¶</a></h4> <ul> <li><a href=https://github.com/Aminiok/vyos-docker>Reference</a></li> <li><a href=https://docs.vyos.io/en/latest/installation/virtual/docker.html>https://docs.vyos.io/en/latest/installation/virtual/docker.html</a></li> <li><a href=https://docs.vyos.io/en/equuleus/configuration/interfaces/ethernet.html>https://docs.vyos.io/en/equuleus/configuration/interfaces/ethernet.html</a></li> </ul> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">¶</a></h2> <h3 id=finding-pid-of-container>Finding pid of Container<a class=headerlink href=#finding-pid-of-container title="Permanent link">¶</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a>sudo docker inspect --format '{{.State.Pid}}' mininet-r0
</span></code></pre></div> <h3 id=entering-vyos-container>Entering vyos Container<a class=headerlink href=#entering-vyos-container title="Permanent link">¶</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a>sudo mnexec -c -e `sudo docker inspect --format '{{.State.Pid}}' mininet-r0`  sh -is
</span></code></pre></div> <h3 id=get-a-vyos-shell-where-show-works>Get a vyos Shell Where <code>show</code> works<a class=headerlink href=#get-a-vyos-shell-where-show-works title="Permanent link">¶</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a>sudo mnexec -e 70522 env -i PS1="#" bash  -is mininet:r0
</span></code></pre></div> <hr> <p><br></p> <div class=blogging-tags-grid> <a class=blogging-tag href=https://samrambles.com/tags#networking><code>#networking</code></a> <a class=blogging-tag href=https://samrambles.com/tags#docker><code>#docker</code></a> <a class=blogging-tag href=https://samrambles.com/tags#mininet><code>#mininet</code></a> </div> <style>
    .md-typeset .blogging-tags-grid {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 5px;
    }

    .md-typeset .blogging-tag {
        color: var(--md-typeset-color);
        background-color: var(--md-typeset-code-color);
    }

    .md-typeset .blogging-tag code {
        border-radius: 5px;
    }
</style></div> <hr> <div class=md-source-file> <small> Last update: 2023-04-04 </small> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Made with ❤️ by Sam. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/peddamat rel=noopener target=_blank title=github.com> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/peddamat rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> <a class=md-social__link href=https://www.instagram.com/speddamat rel=noopener target=_blank title=www.instagram.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "header.autohide", "search.share", "search.highlight", "search.suggest", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "navigation.tracking", "navigation.top", "navigation.sections", "navigation.tabs", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.2a6f1dda.min.js></script> <script src=../../assests/scripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "none", "closeEffect": "none", "slideEffect": "none"});})</script></body> </html>